/* ═══════════════════════════════════════════════════
   MISSION CONTROL — Cyberpunk Design System
   ═══════════════════════════════════════════════════ */

:root {
  --bg-primary: #0a0a0f;
  --bg-card: #12121f;
  --bg-card-hover: #1a1a2e;
  --bg-input: #0d0d1a;
  --neon-green: #00ff41;
  --neon-orange: #ff6600;
  --neon-red: #ff0040;
  --neon-cyan: #00ffff;
  --neon-purple: #8844ff;
  --text-primary: #e0e0e0;
  --text-dim: #666680;
  --border: #1e1e3a;
  --font: 'JetBrains Mono', 'Consolas', 'Courier New', monospace;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body, #root {
  height: 100%;
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font);
  font-size: 13px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

::selection { background: var(--neon-cyan); color: var(--bg-primary); }
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }

/* ── CRT Scanline ── */
.scanline-overlay {
  position: fixed; inset: 0;
  pointer-events: none; z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    rgba(0,0,0,0) 0px,
    rgba(0,0,0,0) 2px,
    rgba(0,0,0,0.03) 2px,
    rgba(0,0,0,0.03) 4px
  );
}

/* ── Glitch Text ── */
.glitch {
  font-size: 1.4em;
  font-weight: 700;
  text-transform: uppercase;
  color: var(--neon-cyan);
  letter-spacing: 0.08em;
  position: relative;
  margin-bottom: 16px;
}
.glitch:hover { animation: glitch 0.3s infinite; }
@keyframes glitch {
  0% { text-shadow: 2px 0 var(--neon-red), -2px 0 var(--neon-cyan); }
  25% { text-shadow: -2px 0 var(--neon-red), 2px 0 var(--neon-cyan); }
  50% { text-shadow: 2px 2px var(--neon-red), -2px -2px var(--neon-cyan); }
  75% { text-shadow: -2px 2px var(--neon-red), 2px -2px var(--neon-cyan); }
  100% { text-shadow: 2px 0 var(--neon-red), -2px 0 var(--neon-cyan); }
}

/* ── Layout ── */
.layout {
  display: flex; flex-direction: column;
  height: 100vh; overflow: hidden;
}
.layout__content {
  flex: 1; overflow-y: auto;
  padding: 16px 20px;
}
.layout__content:has(.af-page) {
  overflow: hidden;
}

/* ── Status Bar ── */
.status-bar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 6px 16px;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
.status-bar__left { display: flex; align-items: center; gap: 8px; }
.status-bar__logo { color: var(--neon-orange); font-weight: 700; font-size: 12px; }
.status-bar__right { display: flex; align-items: center; gap: 8px; color: var(--text-dim); }
.status-bar__sep { color: var(--border); }

.status-dot {
  display: inline-block; width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--text-dim);
}
.status-dot--online { background: var(--neon-green); box-shadow: 0 0 6px var(--neon-green); }
.status-dot--offline { background: var(--neon-red); box-shadow: 0 0 6px var(--neon-red); }
.status-dot--idle { background: var(--text-dim); }

/* ── Tab Nav ── */
.tab-nav {
  display: flex; gap: 0;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
}
.tab-nav__item {
  padding: 8px 16px;
  text-decoration: none;
  color: var(--text-dim);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  border-bottom: 2px solid transparent;
  transition: all 0.15s;
}
.tab-nav__item:hover { color: var(--text-primary); background: rgba(255,255,255,0.02); }
.tab-nav__item--active {
  color: var(--neon-cyan);
  border-bottom-color: var(--neon-cyan);
}
.tab-nav__key { color: var(--neon-orange); margin-right: 4px; font-weight: 400; }

/* ── Stat Cards ── */
.stat-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
  margin-bottom: 20px;
}
.stat-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 14px 16px;
  text-align: center;
  transition: border-color 0.2s;
}
.stat-card:hover { border-color: var(--neon-cyan); box-shadow: 0 0 12px rgba(0,255,255,0.08); }
.stat-card--cyan { border-color: rgba(0,255,255,0.3); }
.stat-card--orange { border-color: rgba(255,102,0,0.3); }
.stat-card--green { border-color: rgba(0,255,65,0.3); }
.stat-card__value { font-size: 1.6em; font-weight: 700; color: var(--neon-cyan); }
.stat-card--cyan .stat-card__value { color: var(--neon-cyan); }
.stat-card--orange .stat-card__value { color: var(--neon-orange); }
.stat-card--green .stat-card__value { color: var(--neon-green); }
.stat-card__label { font-size: 10px; text-transform: uppercase; color: var(--text-dim); letter-spacing: 0.1em; margin-top: 2px; }
.stat-card__sub { font-size: 10px; color: var(--text-dim); }

/* ── Agent Grid ── */
.agent-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(155px, 1fr));
  gap: 10px;
  margin-bottom: 20px;
}
.agent-grid--full {
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 14px;
}

/* ── Agent Card ── */
.agent-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 14px;
  transition: all 0.2s;
  border-left: 3px solid var(--neon-cyan);
  position: relative;
}
.agent-card:hover { border-color: currentColor; box-shadow: 0 0 16px rgba(0,255,255,0.06); transform: translateY(-1px); }
.agent-card--clickable { cursor: pointer; }
.agent-card__gear-corner {
  position: absolute;
  top: 6px;
  right: 6px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 4px; padding: 2px 5px;
  cursor: pointer; font-size: 11px;
  opacity: 0; transition: opacity 0.2s;
  line-height: 1;
  z-index: 5;
}
.agent-card:hover .agent-card__gear-corner { opacity: 1; }
.agent-card__gear-corner:hover {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 8px rgba(0,255,255,0.2);
}
.agent-card:hover .agent-card__gear { opacity: 1; }
.agent-card__gear:hover {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 8px rgba(0,255,255,0.2);
}

.agent-card--compact {
  padding: 10px;
}
.agent-card__compact-top {
  display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
}
.agent-card__compact-left {
  display: flex; align-items: center; gap: 8px; min-width: 0;
}
.agent-card__compact-center {
  display: flex; align-items: center; gap: 4px; margin-left: auto;
}
.agent-card__compact-right {
  display: flex; align-items: center; gap: 4px; margin-left: 8px;
}
.agent-card__avatar { width: 48px; height: 48px; border-radius: 4px; }
.agent-card__avatar--small { width: 36px; height: 36px; }
.agent-card__emoji { font-size: 1.4em; }
.agent-card__name { font-weight: 600; font-size: 12px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.agent-card__role { font-size: 10px; color: var(--text-dim); }
.agent-card__status-text { font-size: 9px; color: var(--text-dim); text-transform: uppercase; }

.agent-card__header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.agent-card__details { display: flex; flex-direction: column; gap: 6px; }
.agent-card__detail { display: flex; justify-content: space-between; font-size: 11px; overflow: hidden; gap: 4px; }
.agent-card__detail > span:last-child { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 0; }
.agent-card__label { color: var(--text-dim); font-size: 9px; text-transform: uppercase; letter-spacing: 0.08em; }

/* ── Panel ── */
.panel {
  background: var(--bg-card);
  border: 1px dashed var(--border);
  border-radius: 6px;
  padding: 14px;
}
.panel__title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--neon-orange);
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}
.panel__empty { color: var(--text-dim); font-size: 11px; font-style: italic; }

/* ── Overview Bottom ── */
.overview__bottom {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

/* ── Mini Run ── */
.mini-run {
  display: flex; align-items: center; gap: 8px;
  padding: 6px 0;
  border-bottom: 1px solid rgba(30,30,58,0.5);
  font-size: 11px;
}
.mini-run__name { color: var(--neon-cyan); font-weight: 600; }
.mini-run__id { color: var(--text-dim); }
.mini-run__step { color: var(--neon-green); }

/* ── Activity Feed ── */
.activity-feed { max-height: 200px; overflow-y: auto; }
.activity-feed--empty { color: var(--text-dim); font-size: 11px; }
.activity-feed__item {
  display: flex; gap: 8px;
  padding: 4px 0;
  font-size: 11px;
  border-bottom: 1px solid rgba(30,30,58,0.3);
}
.activity-feed__time { color: var(--text-dim); min-width: 40px; }
.activity-feed__text strong { color: var(--neon-orange); }

/* ── Kanban ── */
.kanban { display: flex; flex-direction: column; gap: 16px; margin-bottom: 24px; }
.kanban__workflow {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 16px;
  transition: border-color 0.3s;
}
.kanban__workflow--active {
  border-color: var(--neon-green);
  box-shadow: 0 0 12px rgba(0,255,65,0.08);
}
.kanban__header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.kanban__title { font-size: 13px; text-transform: uppercase; color: var(--neon-orange); margin: 0; }
.kanban__run-badge {
  display: inline-flex; align-items: center; gap: 5px;
  font-size: 9px; text-transform: uppercase; color: var(--neon-green);
  background: rgba(0,255,65,0.08); border: 1px solid rgba(0,255,65,0.2);
  border-radius: 10px; padding: 2px 8px; font-weight: 600;
}
.kanban__steps { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 8px; }
.kanban__step {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px 10px;
  min-width: 85px;
  display: flex; align-items: center; gap: 6px;
  transition: all 0.2s;
}
.kanban__step--clickable { cursor: pointer; }
.kanban__step--clickable:hover { border-color: var(--neon-cyan); background: rgba(0,255,255,0.04); }
.kanban__step--done {
  border-color: #2a6b3a; background: rgba(0,255,65,0.04);
}
.kanban__step--pending, .kanban__step--running {
  border-color: var(--neon-green);
  box-shadow: 0 0 10px rgba(0,255,65,0.15);
  animation: pulse 2s infinite;
}
.kanban__step--failed { border-color: var(--neon-red); background: rgba(255,50,50,0.05); }
.kanban__step--waiting { opacity: 0.45; }
.kanban__step-info { display: flex; flex-direction: column; }
.kanban__step-name { font-size: 10px; font-weight: 600; text-transform: uppercase; }
.kanban__step-agent { font-size: 8px; color: var(--text-dim); }
.kanban__run-meta {
  display: flex; gap: 12px; align-items: center; flex-wrap: wrap;
  font-size: 10px; color: var(--text-dim); margin-top: 4px;
}
.kanban__run-id { color: var(--text-dim); font-family: monospace; }
.kanban__current-step { color: var(--neon-green); }
.kanban__current-step strong { color: var(--neon-green); }
.kanban__stories { color: var(--neon-cyan); }
.kanban__elapsed { color: var(--text-dim); }
.kanban__task-preview {
  font-size: 10px; color: var(--text-dim); margin-top: 6px;
  padding: 6px 8px; background: var(--bg-primary); border-radius: 3px;
  border-left: 2px solid var(--neon-orange);
}
.kanban__last-run { font-size: 9px; color: var(--text-dim); margin-top: 6px; }

/* Step status icons */
.step-icon { font-size: 11px; font-weight: 700; width: 16px; text-align: center; flex-shrink: 0; }
.step-icon--done { color: var(--neon-green); }
.step-icon--active { color: var(--neon-green); }
.step-icon--failed { color: var(--neon-red); }
.step-icon--waiting { color: var(--text-dim); }

/* Pulse dot */
.pulse-dot {
  display: inline-block; width: 6px; height: 6px; border-radius: 50%;
  background: var(--neon-green); animation: pulse-dot 1.5s infinite;
}
@keyframes pulse-dot {
  0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--neon-green); }
  50% { opacity: 0.4; box-shadow: 0 0 8px var(--neon-green); }
}

/* Progress bar */
.progress-bar {
  position: relative; height: 16px; background: var(--bg-primary);
  border-radius: 3px; overflow: hidden; margin-bottom: 10px;
  border: 1px solid var(--border);
}
.progress-bar__fill {
  height: 100%; background: linear-gradient(90deg, rgba(0,255,65,0.3), rgba(0,255,65,0.15));
  border-radius: 3px; transition: width 0.5s ease;
}
.progress-bar__label {
  position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
  font-size: 9px; color: var(--text-primary); font-weight: 600;
}

/* Step detail modal */
.step-detail-backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,0.6);
  z-index: 100; display: flex; align-items: center; justify-content: center;
}
.step-detail {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 8px; padding: 20px; width: 90%; max-width: 560px;
  max-height: 70vh; overflow-y: auto;
}
.step-detail__header {
  display: flex; align-items: center; gap: 10px; margin-bottom: 12px;
}
.step-detail__header h4 { margin: 0; font-size: 14px; }
.step-detail__status {
  font-size: 10px; text-transform: uppercase; padding: 2px 8px;
  border-radius: 10px; font-weight: 600;
}
.step-detail__status--done { color: var(--neon-green); background: rgba(0,255,65,0.1); }
.step-detail__status--failed { color: var(--neon-red); background: rgba(255,50,50,0.1); }
.step-detail__status--pending { color: var(--neon-orange); background: rgba(255,165,0,0.1); }
.step-detail__close { margin-left: auto; background: none; border: none; color: var(--text-dim); cursor: pointer; font-size: 16px; }
.step-detail__agent { font-size: 11px; color: var(--text-dim); margin-bottom: 10px; }
.step-detail__output {
  font-size: 11px; background: var(--bg-primary); border: 1px solid var(--border);
  border-radius: 4px; padding: 10px; overflow-x: auto; white-space: pre-wrap;
  max-height: 300px; color: var(--text-primary); line-height: 1.5;
}
.step-detail__empty { font-size: 11px; color: var(--text-dim); font-style: italic; }

/* Stat chips */
.stat-chip {
  font-size: 10px; padding: 2px 8px; border-radius: 10px;
  background: var(--bg-primary); border: 1px solid var(--border);
  color: var(--text-dim);
}
.stat-chip--active { color: var(--neon-green); border-color: rgba(0,255,65,0.3); }

@keyframes pulse {
  0%, 100% { box-shadow: 0 0 10px rgba(0,255,65,0.15); }
  50% { box-shadow: 0 0 20px rgba(0,255,65,0.3); }
}

/* ── Run Card ── */
.run-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 12px 14px;
  margin-bottom: 8px;
  transition: border-color 0.2s;
}
.run-card:hover { border-color: var(--text-dim); }
.run-card--running { border-left: 3px solid var(--neon-green); }
.run-card--completed { border-left: 3px solid #2a6b3a; }
.run-card--failed { border-left: 3px solid var(--neon-red); }
.run-card__header { display: flex; align-items: center; gap: 10px; }
.run-card__id { color: var(--text-dim); font-size: 10px; font-family: monospace; }
.run-card__workflow { font-weight: 600; font-size: 12px; }
.run-card__progress { font-size: 10px; color: var(--neon-cyan); }
.run-card__expand { margin-left: auto; font-size: 10px; color: var(--text-dim); }
.run-card__task { font-size: 11px; color: var(--text-dim); margin-top: 4px; }
.run-card__meta { display: flex; gap: 12px; font-size: 10px; color: var(--text-dim); margin-top: 4px; }
.run-card__meta strong { color: var(--neon-green); }
.runs-list { max-height: 500px; overflow-y: auto; }

/* Run badge */
.run-badge {
  font-size: 9px; text-transform: uppercase; padding: 2px 8px;
  border-radius: 10px; font-weight: 600;
}
.badge--done { color: #2a6b3a; background: rgba(0,255,65,0.08); }
.badge--running { color: var(--neon-green); background: rgba(0,255,65,0.1); }
.badge--failed { color: var(--neon-red); background: rgba(255,50,50,0.08); }
.badge--waiting { color: var(--text-dim); background: rgba(255,255,255,0.03); }

/* Run card steps (expanded) */
.run-card__steps {
  margin-top: 10px; padding-top: 10px;
  border-top: 1px solid var(--border);
}
.run-card__steps-header {
  font-size: 10px; text-transform: uppercase; color: var(--text-dim);
  margin-bottom: 6px; font-weight: 600;
}
.run-card__step {
  display: flex; align-items: center; gap: 8px;
  padding: 4px 0; font-size: 11px;
}
.run-card__step--done { color: var(--text-primary); }
.run-card__step--failed { color: var(--neon-red); }
.run-card__step--pending { color: var(--neon-green); }
.run-card__step--waiting { color: var(--text-dim); opacity: 0.5; }
.run-card__step-status { width: 14px; text-align: center; flex-shrink: 0; }
.run-card__step--done .run-card__step-status { color: var(--neon-green); }
.run-card__step--failed .run-card__step-status { color: var(--neon-red); }
.run-card__step--pending .run-card__step-status { color: var(--neon-green); }
.run-card__step-name { font-weight: 600; text-transform: uppercase; min-width: 70px; }
.run-card__step-agent { color: var(--text-dim); font-size: 10px; }
.run-card__step-badge {
  margin-left: auto; font-size: 8px; text-transform: uppercase;
  padding: 1px 6px; border-radius: 8px;
}
.run-card__step-badge--done { color: #2a6b3a; background: rgba(0,255,65,0.08); }
.run-card__step-badge--failed { color: var(--neon-red); background: rgba(255,50,50,0.06); }
.run-card__step-badge--pending { color: var(--neon-green); background: rgba(0,255,65,0.08); }
.run-card__step-badge--waiting { color: var(--text-dim); background: rgba(255,255,255,0.02); }
.run-card__steps-summary {
  font-size: 10px; color: var(--text-dim); margin-top: 6px;
  padding-top: 6px; border-top: 1px dashed var(--border);
}

/* ── Run Detail Page ── */
.run-detail-page { padding: 0; }
.rd-header { margin-bottom: 16px; }
.rd-back {
  background: none; border: 1px solid var(--border); color: var(--text-dim);
  padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 11px;
  margin-bottom: 10px; transition: all 0.2s;
}
.rd-back:hover { border-color: var(--neon-cyan); color: var(--neon-cyan); }
.rd-title-row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.rd-title-row h2 { margin: 0; }
.rd-status { font-size: 10px; text-transform: uppercase; padding: 2px 10px; border-radius: 10px; font-weight: 600; }
.rd-status--running { color: var(--neon-green); background: rgba(0,255,65,0.1); }
.rd-status--completed { color: #2a6b3a; background: rgba(0,255,65,0.06); }
.rd-status--failed { color: var(--neon-red); background: rgba(255,50,50,0.08); }
.rd-meta {
  display: flex; gap: 12px; font-size: 10px; color: var(--text-dim); margin-top: 6px; flex-wrap: wrap;
}

/* Run detail tabs */
.rd-tabs {
  display: flex; gap: 2px; margin-bottom: 16px;
  border-bottom: 1px solid var(--border); padding-bottom: 0;
}
.rd-tab {
  background: none; border: none; color: var(--text-dim); padding: 8px 14px;
  font-size: 11px; font-weight: 600; text-transform: uppercase; cursor: pointer;
  border-bottom: 2px solid transparent; transition: all 0.2s;
  display: flex; align-items: center; gap: 6px;
}
.rd-tab:hover { color: var(--text-primary); }
.rd-tab--active { color: var(--neon-green); border-bottom-color: var(--neon-green); }
.rd-tab-count {
  font-size: 9px; background: rgba(0,255,65,0.1); color: var(--neon-green);
  padding: 1px 5px; border-radius: 8px;
}

.rd-content { min-height: 400px; }
.rd-section-title {
  font-size: 11px; text-transform: uppercase; color: var(--neon-orange);
  margin-bottom: 10px; display: flex; align-items: center; gap: 8px;
}
.rd-empty { color: var(--text-dim); font-size: 12px; padding: 20px; text-align: center; }

/* Pipeline steps */
.rd-pipeline { margin-bottom: 20px; }
.rd-pipeline-steps { display: flex; flex-direction: column; }
.rd-pipe-row { position: relative; }
.rd-pipe-connector {
  width: 2px; height: 8px; background: var(--border);
  margin-left: 17px;
}
.rd-pipe-step {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 14px; background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 6px; cursor: pointer; transition: all 0.2s;
}
.rd-pipe-step:hover { border-color: var(--neon-cyan); }
.rd-pipe-step--selected { border-color: var(--neon-green); background: rgba(0,255,65,0.03); }
.rd-pipe-step--done { border-left: 3px solid var(--neon-green); }
.rd-pipe-step--pending, .rd-pipe-step--running { border-left: 3px solid var(--neon-cyan); }
.rd-pipe-step--failed { border-left: 3px solid var(--neon-red); }
.rd-pipe-step--waiting { opacity: 0.5; }
.rd-pipe-icon {
  width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; flex-shrink: 0;
}
.rd-pipe-step--done .rd-pipe-icon { background: rgba(0,255,65,0.12); color: var(--neon-green); }
.rd-pipe-step--pending .rd-pipe-icon, .rd-pipe-step--running .rd-pipe-icon { background: rgba(0,255,255,0.12); color: var(--neon-cyan); }
.rd-pipe-step--failed .rd-pipe-icon { background: rgba(255,50,50,0.12); color: var(--neon-red); }
.rd-pipe-step--waiting .rd-pipe-icon { background: rgba(255,255,255,0.04); color: var(--text-dim); }
.rd-pipe-info { flex: 1; }
.rd-pipe-name { font-size: 12px; font-weight: 600; text-transform: uppercase; }
.rd-pipe-agent { font-size: 10px; color: var(--text-dim); }
.rd-pipe-meta { display: flex; gap: 8px; align-items: center; }
.rd-pipe-badge {
  font-size: 9px; text-transform: uppercase; padding: 2px 8px;
  border-radius: 10px; font-weight: 600;
}
.rd-pipe-badge--done { color: var(--neon-green); background: rgba(0,255,65,0.08); }
.rd-pipe-badge--pending, .rd-pipe-badge--running { color: var(--neon-cyan); background: rgba(0,255,255,0.08); }
.rd-pipe-badge--failed { color: var(--neon-red); background: rgba(255,50,50,0.08); }
.rd-pipe-badge--waiting { color: var(--text-dim); background: rgba(255,255,255,0.03); }
.rd-pipe-retry { font-size: 9px; color: var(--neon-orange); }

/* Step output */
.rd-step-output {
  margin-top: 16px; background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 6px; padding: 14px;
}
.rd-output-pre {
  font-size: 11px; background: var(--bg-primary); border: 1px solid var(--border);
  border-radius: 4px; padding: 12px; overflow-x: auto; white-space: pre-wrap;
  max-height: 400px; overflow-y: auto; color: var(--text-primary); line-height: 1.6;
  font-family: 'Fira Code', 'Cascadia Code', monospace;
}
.rd-output-pre--compact { max-height: 250px; font-size: 10px; }

/* Chat tab */
.rd-chat-layout { display: flex; gap: 12px; min-height: 400px; }
.rd-chat-sidebar {
  width: 160px; min-width: 140px; display: flex; flex-direction: column; gap: 4px;
}
.rd-chat-sidebar h4 { font-size: 10px; text-transform: uppercase; color: var(--text-dim); margin-bottom: 6px; }
.rd-agent-btn {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 10px; background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 4px; cursor: pointer; transition: all 0.2s;
  color: var(--text-primary); font-size: 11px; width: 100%;
}
.rd-agent-btn:hover { border-color: var(--neon-cyan); }
.rd-agent-btn--active { border-color: var(--neon-green); background: rgba(0,255,65,0.04); }
.rd-agent-name { font-weight: 600; text-transform: capitalize; }
.rd-agent-count { font-size: 9px; color: var(--text-dim); }

.rd-chat-messages {
  flex: 1; max-height: 500px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px;
}
.rd-chat-session {
  background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; padding: 10px;
}
.rd-chat-session-id { font-size: 9px; color: var(--text-dim); margin-bottom: 8px; font-family: monospace; }
.rd-msg { padding: 8px 10px; border-radius: 6px; margin-bottom: 4px; }
.rd-msg--user { background: rgba(0,255,255,0.05); border-left: 2px solid var(--neon-cyan); }
.rd-msg--assistant { background: rgba(0,255,65,0.04); border-left: 2px solid var(--neon-green); }
.rd-msg--toolResult, .rd-msg--tool { background: rgba(255,165,0,0.04); border-left: 2px solid var(--neon-orange); }
.rd-msg-role { font-size: 9px; text-transform: uppercase; font-weight: 600; color: var(--text-dim); margin-bottom: 2px; }
.rd-msg-text { font-size: 11px; white-space: pre-wrap; word-break: break-word; line-height: 1.5; max-height: 200px; overflow-y: auto; }

/* Files tab */
.rd-git-section { margin-bottom: 20px; }
.rd-commit {
  background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px;
  padding: 10px 12px; margin-bottom: 6px;
}
.rd-commit-header { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.rd-commit-hash { font-family: monospace; font-size: 11px; color: var(--neon-cyan); font-weight: 600; }
.rd-commit-msg { font-size: 12px; flex: 1; }
.rd-commit-date { font-size: 10px; color: var(--text-dim); }
.rd-commit-stats {
  margin-top: 6px; padding-top: 6px; border-top: 1px dashed var(--border);
  font-size: 10px; color: var(--text-dim); font-family: monospace;
}
.rd-commit-file { padding: 1px 0; }

.rd-tree-section { margin-bottom: 20px; }
.rd-file-tree {
  background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px;
  padding: 10px; max-height: 350px; overflow-y: auto;
}
.rd-file-item { font-size: 11px; padding: 3px 6px; font-family: monospace; display: flex; align-items: center; gap: 6px; }
.rd-file-icon { font-size: 12px; }

/* Stories tab */
.rd-stories { display: flex; flex-direction: column; gap: 6px; }
.rd-story {
  background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; overflow: hidden;
}
.rd-story-header {
  display: flex; align-items: center; gap: 10px; padding: 10px 14px; cursor: pointer;
  transition: background 0.2s;
}
.rd-story-header:hover { background: rgba(0,255,65,0.03); }
.rd-story-id { font-size: 10px; color: var(--neon-cyan); font-weight: 700; font-family: monospace; min-width: 50px; }
.rd-story-title { font-size: 12px; flex: 1; }
.rd-story-chevron { font-size: 10px; color: var(--text-dim); }
.rd-story-body { padding: 0 14px 14px; border-top: 1px solid var(--border); }
.rd-story-desc { font-size: 11px; color: var(--text-dim); margin: 10px 0; line-height: 1.5; white-space: pre-wrap; }
.rd-story-criteria {
  list-style: none; padding: 0; margin: 8px 0 0;
}
.rd-story-criteria li {
  font-size: 11px; padding: 4px 0 4px 18px; position: relative; color: var(--text-dim);
}
.rd-story-criteria li::before {
  content: '☐'; position: absolute; left: 0; color: var(--neon-orange);
}

/* Kanban clickable */
.kanban__task-preview--clickable { cursor: pointer; transition: all 0.2s; }
.kanban__task-preview--clickable:hover { border-left-color: var(--neon-green); background: rgba(0,255,65,0.04); }
.kanban__detail-link { display: block; font-size: 9px; color: var(--neon-cyan); margin-top: 4px; }
.run-card--clickable { cursor: pointer; }
.run-card--clickable:hover { border-color: var(--neon-cyan); }

/* Progress section */
.rd-progress-section { margin-top: 16px; }

/* ── Chat Page ── */
.chat-page__layout { display: flex; gap: 0; height: calc(100vh - 150px); }
.chat-sidebar {
  width: 180px; min-width: 180px;
  background: var(--bg-card);
  border-right: 1px solid var(--border);
  padding: 10px 0;
  overflow-y: auto;
}
.chat-sidebar__title {
  font-size: 10px; text-transform: uppercase;
  letter-spacing: 0.1em; color: var(--text-dim);
  padding: 0 12px 8px; border-bottom: 1px solid var(--border);
}
.chat-sidebar__agent {
  display: flex; align-items: center; gap: 8px;
  width: 100%; padding: 8px 12px;
  background: none; border: none; border-left: 3px solid transparent;
  color: var(--text-primary); font-family: var(--font);
  font-size: 12px; cursor: pointer;
  transition: all 0.15s;
}
.chat-sidebar__agent:hover { background: rgba(255,255,255,0.03); }
.chat-sidebar__agent--active { background: rgba(0,255,255,0.05); border-left-color: var(--neon-cyan); }

.chat-panel {
  flex: 1; display: flex; flex-direction: column;
  background: var(--bg-primary);
}
.chat-panel__header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 16px;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
}
.chat-panel__agent-info { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 600; }
.chat-panel__agent-name { color: var(--neon-cyan); }
.chat-panel__status { font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--neon-red); }
.chat-panel__status--on { color: var(--neon-green); }
.chat-panel__messages {
  flex: 1; overflow-y: auto;
  padding: 16px 20px;
}
.chat-panel__empty {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  height: 100%; color: var(--text-dim); font-size: 12px; gap: 8px;
}
.chat-panel__empty-icon { font-size: 2.5em; opacity: 0.4; }
.chat-panel__empty-sub { font-size: 10px; color: var(--text-dim); opacity: 0.5; }
.chat-panel__loading { text-align: center; color: var(--text-dim); font-size: 11px; padding: 20px; }
.chat-msg__tool { font-size: 9px; color: var(--neon-orange); background: rgba(255,165,0,0.08); padding: 1px 6px; border-radius: 8px; }
.chat-msg--toolResult .chat-msg__bubble { font-family: monospace; font-size: 10px; opacity: 0.7; max-height: 100px; overflow-y: auto; }
.chat-msg { padding: 8px 0; }
.chat-msg__header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
.chat-msg__from { font-size: 11px; font-weight: 600; }
.chat-msg--assistant .chat-msg__from { color: var(--neon-orange); }
.chat-msg--user .chat-msg__from { color: var(--neon-cyan); }
.chat-msg__typing { font-size: 9px; color: var(--neon-green); animation: blink 1.5s infinite; }
.chat-msg__bubble {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 10px 14px;
  font-size: 12px;
  line-height: 1.6;
  max-width: 85%;
  white-space: pre-wrap;
  word-break: break-word;
}
.chat-msg--user .chat-msg__bubble {
  background: rgba(0,255,255,0.06);
  border-color: rgba(0,255,255,0.15);
  margin-left: auto;
}
.chat-msg--assistant .chat-msg__bubble {
  border-color: rgba(255,102,0,0.15);
}

.chat-panel__input {
  display: flex; gap: 8px;
  padding: 10px 16px;
  border-top: 1px solid var(--border);
  background: var(--bg-card);
}
.chat-panel__input input {
  flex: 1;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px 12px;
  color: var(--text-primary);
  font-family: var(--font);
  font-size: 12px;
  outline: none;
}
.chat-panel__input input:focus { border-color: var(--neon-cyan); }
.chat-panel__input button {
  background: var(--neon-cyan);
  color: var(--bg-primary);
  border: none; border-radius: 4px;
  padding: 8px 16px;
  font-family: var(--font);
  font-weight: 700; font-size: 11px;
  cursor: pointer;
  text-transform: uppercase;
}
.chat-panel__input button:disabled { opacity: 0.4; cursor: default; }

/* ── Ops Page ── */
.ops-page__grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 20px;
}
.ops-page__section {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 14px;
}

/* ── System Metrics ── */
.system-metrics { display: flex; flex-direction: column; gap: 12px; }
.metric-bar__header { display: flex; justify-content: space-between; margin-bottom: 4px; }
.metric-bar__label { font-size: 10px; text-transform: uppercase; color: var(--text-dim); letter-spacing: 0.08em; }
.metric-bar__value { font-size: 11px; }
.metric-bar__track {
  height: 6px; background: var(--bg-primary);
  border-radius: 3px; overflow: hidden;
}
.metric-bar__fill {
  height: 100%; border-radius: 3px;
  transition: width 0.5s ease;
}

/* ── Docker ── */
.docker-list { display: flex; flex-direction: column; gap: 6px; }
.docker-card {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px;
  background: var(--bg-primary);
  border-radius: 4px;
  border-left: 3px solid var(--text-dim);
  font-size: 11px;
}
.docker-card--running { border-left-color: var(--neon-green); }
.docker-card__name { font-weight: 600; min-width: 100px; }
.docker-card__image { color: var(--text-dim); flex: 1; }
.docker-card__state { text-transform: uppercase; font-size: 10px; }

/* ── Cron Table ── */
.cron-table { overflow-x: auto; }
.cron-table table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.cron-table th {
  text-align: left;
  padding: 8px 10px;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-dim);
  border-bottom: 1px solid var(--border);
}
.cron-table td {
  padding: 8px 10px;
  border-bottom: 1px solid rgba(30,30,58,0.3);
}
.cron-table__row--error { background: rgba(255,0,64,0.05); }
.cron-table__name { font-weight: 600; color: var(--neon-cyan); }
.cron-table__schedule { font-family: var(--font); color: var(--text-dim); }
.cron-status { font-size: 10px; text-transform: uppercase; font-weight: 600; }
.cron-status--ok { color: var(--neon-green); }
.cron-status--error { color: var(--neon-red); }
.cron-status--pending { color: var(--text-dim); }
.cron-errors { color: var(--neon-red); font-size: 10px; }

/* ── Toggle Switch ── */
.toggle-switch {
  width: 36px; height: 18px;
  border-radius: 9px;
  border: 1px solid var(--border);
  background: var(--bg-primary);
  cursor: pointer;
  position: relative;
  transition: all 0.2s;
  padding: 0;
}
.toggle-switch--on { background: rgba(0,255,65,0.15); border-color: var(--neon-green); }
.toggle-switch__knob {
  display: block;
  width: 12px; height: 12px;
  border-radius: 50%;
  background: var(--text-dim);
  position: absolute; top: 2px; left: 2px;
  transition: all 0.2s;
}
.toggle-switch--on .toggle-switch__knob {
  transform: translateX(18px);
  background: var(--neon-green);
  box-shadow: 0 0 6px var(--neon-green);
}

/* ── Cost Charts ── */
.cost-charts {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 20px;
}
.cost-chart {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 14px;
}
.cost-chart__title {
  font-size: 10px; text-transform: uppercase;
  letter-spacing: 0.1em; color: var(--neon-orange);
  margin-bottom: 10px;
}

/* ── Token Table ── */
.token-table-wrapper { overflow-x: auto; margin-bottom: 20px; }
.token-table { width: 100%; border-collapse: collapse; font-size: 11px; }
.token-table th {
  text-align: left; padding: 8px 10px;
  font-size: 9px; text-transform: uppercase;
  letter-spacing: 0.1em; color: var(--text-dim);
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
.token-table td { padding: 8px 10px; border-bottom: 1px solid rgba(30,30,58,0.3); white-space: nowrap; }
.token-table__model { font-weight: 600; color: var(--neon-orange); }
.token-table__cost { color: var(--neon-green); font-weight: 600; }
.token-table tbody tr:hover { background: rgba(0,255,65,0.03); }

/* ── Modal ── */
.modal-backdrop {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.modal {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 24px;
  min-width: 400px;
  max-width: 500px;
}
.modal h3 { color: var(--neon-cyan); margin-bottom: 16px; font-size: 14px; }

/* ── Agent Edit Modal ── */
.agent-edit-modal__header {
  display: flex; align-items: center; gap: 10px; margin-bottom: 16px;
  padding-bottom: 10px; border-bottom: 1px solid var(--border);
}
.agent-edit-modal__header h3 { margin: 0; flex: 1; }
.agent-edit-modal__emoji { font-size: 1.6em; }
.agent-edit-modal__close {
  background: none; border: none; color: var(--text-dim);
  font-size: 16px; cursor: pointer; padding: 4px 8px;
}
.agent-edit-modal__close:hover { color: var(--neon-red); }
.agent-edit-modal__label {
  display: block; font-size: 10px; text-transform: uppercase;
  color: var(--text-dim); letter-spacing: 0.08em; margin-bottom: 4px;
}
.agent-edit-modal__models {
  display: flex; flex-wrap: wrap; gap: 6px; margin-top: 4px;
}
.agent-edit-modal__model-btn {
  display: flex; align-items: center; gap: 6px;
  padding: 6px 10px;
  background: var(--bg-primary); border: 1px solid var(--border);
  border-radius: 4px; color: var(--text-dim);
  font-family: var(--font); font-size: 10px;
  cursor: pointer; transition: all 0.15s;
}
.agent-edit-modal__model-btn:hover { border-color: var(--text-primary); color: var(--text-primary); }
.agent-edit-modal__model-btn--active {
  background: rgba(0,255,255,0.05);
  font-weight: 600;
}
.agent-edit-modal__model-dot {
  width: 6px; height: 6px; border-radius: 50;
  flex-shrink: 0;
}
.agent-edit-modal__error {
  color: var(--neon-red); font-size: 11px;
  padding: 6px 0; margin-top: 4px;
}
.agent-edit-modal__success {
  color: var(--neon-green); font-size: 11px;
  padding: 6px 0; margin-top: 4px;
}
.modal label {
  display: block; margin-bottom: 12px;
  font-size: 10px; text-transform: uppercase;
  color: var(--text-dim); letter-spacing: 0.08em;
}
.modal select, .modal textarea, .modal input[type="text"] {
  display: block; width: 100%;
  margin-top: 4px;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px 10px;
  color: var(--text-primary);
  font-family: var(--font);
  font-size: 12px;
  outline: none;
}
.modal select:focus, .modal textarea:focus { border-color: var(--neon-cyan); }
.modal__actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 16px; }

/* ── Buttons ── */
.btn {
  padding: 8px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-primary);
  font-family: var(--font);
  font-size: 11px;
  cursor: pointer;
  text-transform: uppercase;
  font-weight: 600;
  transition: all 0.15s;
}
.btn:hover { border-color: var(--text-dim); }
.btn--primary {
  background: var(--neon-cyan);
  color: var(--bg-primary);
  border-color: var(--neon-cyan);
}
.btn--primary:hover { box-shadow: 0 0 12px rgba(0,255,255,0.3); }
.btn:disabled { opacity: 0.4; cursor: default; }

/* ── Section Title ── */
.section-title {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--neon-orange);
  margin: 16px 0 10px;
  padding-bottom: 6px;
  border-bottom: 1px dashed var(--border);
}

/* ── Workflows Header ── */
.workflows-page__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}
.workflows-page__stats {
  display: flex; gap: 6px; align-items: center;
}

/* ── Loading ── */
.page-loading {
  display: flex; align-items: center; justify-content: center;
  height: 200px;
  color: var(--text-dim);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  animation: blink 1.5s infinite;
}
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

/* ═══════════════════════════════════════════════════
   RESPONSIVE — Tablet (≤768px)
   ═══════════════════════════════════════════════════ */
@media (max-width: 768px) {
  html, body, #root { font-size: 12px; }

  /* Status Bar */
  .status-bar {
    flex-wrap: wrap;
    gap: 4px;
    padding: 6px 10px;
    font-size: 10px;
  }
  .status-bar__left { flex: 1; min-width: 0; }
  .status-bar__right { gap: 6px; font-size: 9px; }
  .status-bar__logo { font-size: 11px; }

  /* Tab Nav: horizontal scroll */
  .tab-nav {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .tab-nav::-webkit-scrollbar { display: none; }
  .tab-nav__item {
    padding: 8px 12px;
    font-size: 10px;
    white-space: nowrap;
    flex-shrink: 0;
  }

  /* Layout */
  .layout__content { padding: 12px; }

  /* Stat Cards */
  .stat-cards {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
  .stat-card { padding: 10px 12px; }
  .stat-card__value { font-size: 1.3em; }
  .stat-card__label { font-size: 9px; }

  /* Agent Grid */
  .agent-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 8px;
  }
  .agent-grid--full {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 10px;
  }

  /* Agent Card */
  .agent-card { padding: 10px; }
  .agent-card--compact { padding: 8px; }
  .agent-card__avatar { width: 36px; height: 36px; }
  .agent-card__name { font-size: 11px; }
  .agent-card__role {
    font-size: 9px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }
  .agent-card__detail {
    font-size: 10px;
    flex-direction: column;
    gap: 2px;
  }
  .agent-card__detail span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Overview Bottom */
  .overview__bottom { grid-template-columns: 1fr; }

  /* Ops */
  .ops-page__grid { grid-template-columns: 1fr; }

  /* Chat */
  .chat-sidebar { width: 140px; min-width: 140px; }
  .chat-panel__messages { padding: 12px; }

  /* Cost */
  .cost-charts { grid-template-columns: 1fr; }

  /* Kanban */
  .kanban__steps { flex-direction: column; }
  .kanban__step { min-width: unset; }
  .kanban__header { flex-wrap: wrap; }
  .workflows-page__stats { flex-wrap: wrap; gap: 4px; }
  .workflows-page__header { flex-wrap: wrap; gap: 8px; }
  .step-detail { width: 95%; max-width: none; padding: 14px; }
  .step-detail__output { font-size: 10px; max-height: 200px; }
  .run-card__step { font-size: 10px; }
  .progress-bar { height: 14px; }
  .progress-bar__label { font-size: 8px; }

  /* Tables */
  .cron-table { font-size: 10px; }
  .cron-table th, .cron-table td { padding: 6px 6px; }

  /* Modal */
  .modal { min-width: unset; max-width: 90vw; margin: 16px; }

  /* Glitch */
  .glitch { font-size: 1.1em; margin-bottom: 12px; }
}

/* ═══════════════════════════════════════════════════
   RESPONSIVE — Mobile (≤480px)
   ═══════════════════════════════════════════════════ */
@media (max-width: 480px) {
  html, body, #root { font-size: 11px; }

  /* Run Detail responsive */
  .rd-chat-layout { flex-direction: column; }
  .rd-chat-sidebar { width: 100%; flex-direction: row; overflow-x: auto; gap: 4px; }
  .rd-agent-btn { min-width: 100px; }
  .rd-tabs { overflow-x: auto; }
  .rd-tab { white-space: nowrap; padding: 6px 10px; font-size: 10px; }
  .rd-pipe-step { padding: 8px 10px; }
  .rd-pipe-icon { width: 24px; height: 24px; font-size: 10px; }
  .rd-pipe-name { font-size: 11px; }
  .rd-output-pre { max-height: 200px; font-size: 10px; }
  .rd-msg-text { font-size: 10px; }
  .rd-file-tree { max-height: 250px; }

  /* Status Bar: 2 rows */
  .status-bar {
    flex-direction: column;
    align-items: flex-start;
    gap: 2px;
    padding: 6px 8px;
  }
  .status-bar__left { width: 100%; }
  .status-bar__right {
    width: 100%;
    justify-content: flex-end;
    gap: 4px;
    font-size: 8px;
  }
  .status-bar__sep { display: none; }

  /* Tab Nav: smaller tabs */
  .tab-nav__item {
    padding: 6px 8px;
    font-size: 9px;
  }
  .tab-nav__key { display: none; }

  /* Layout */
  .layout__content { padding: 8px; }

  /* Stat Cards: 2 columns, compact */
  .stat-cards {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }
  .stat-card { padding: 8px; }
  .stat-card__value { font-size: 1.1em; }
  .stat-card__label { font-size: 8px; }
  .stat-card__sub { font-size: 8px; }

  /* Agent Grid: 2 columns */
  .agent-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }
  .agent-grid--full {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  /* Agent Card: tighter */
  .agent-card { padding: 8px; border-left-width: 2px; }
  .agent-card--compact {
    padding: 6px;
    gap: 2px;
  }
  .agent-card__avatar { width: 30px; height: 30px; }
  .agent-card__avatar--small { width: 24px; height: 24px; }
  .agent-card__emoji { font-size: 1.1em; }
  .agent-card__name {
    font-size: 10px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }
  .agent-card__role {
    font-size: 8px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }
  .agent-card__status-text { font-size: 8px; }

  /* Agent Card Full: model text truncation */
  .agent-card__header { gap: 8px; margin-bottom: 6px; }
  .agent-card__details { gap: 4px; }
  .agent-card__detail {
    font-size: 9px;
    flex-direction: column;
    gap: 1px;
  }
  .agent-card__label { font-size: 8px; }

  /* Chat: sidebar collapse + full width */
  .chat-page__layout {
    flex-direction: column;
    height: calc(100vh - 120px);
  }
  .chat-sidebar {
    width: 100%;
    min-width: unset;
    flex-direction: row;
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    border-right: none;
    border-bottom: 1px solid var(--border);
    padding: 0;
    max-height: 44px;
    -webkit-overflow-scrolling: touch;
  }
  .chat-sidebar::-webkit-scrollbar { display: none; }
  .chat-sidebar__title { display: none; }
  .chat-sidebar__agent {
    flex-shrink: 0;
    padding: 8px 10px;
    border-left: none;
    border-bottom: 3px solid transparent;
    font-size: 11px;
    white-space: nowrap;
  }
  .chat-sidebar__agent--active {
    border-bottom-color: var(--neon-cyan);
    border-left-color: transparent;
  }
  .chat-panel__messages { padding: 8px; }
  .chat-msg__bubble {
    max-width: 95%;
    padding: 8px 10px;
    font-size: 11px;
  }
  .chat-panel__input { padding: 8px; gap: 6px; }
  .chat-panel__input input { padding: 6px 10px; font-size: 11px; }
  .chat-panel__input button { padding: 6px 12px; font-size: 10px; }

  /* Panels */
  .panel { padding: 10px; }
  .panel__title { font-size: 9px; }

  /* Glitch */
  .glitch { font-size: 0.95em; margin-bottom: 8px; }

  /* Cron table: horizontal scroll */
  .cron-table { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .cron-table table { min-width: 500px; }
  .cron-table th, .cron-table td { padding: 4px 4px; font-size: 9px; }

  /* Token table */
  .token-table { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .token-table table { min-width: 400px; }

  /* Docker cards */
  .docker-card {
    flex-wrap: wrap;
    padding: 6px 8px;
    font-size: 10px;
  }
  .docker-card__name { min-width: 80px; font-size: 10px; }
  .docker-card__image { font-size: 9px; }

  /* Activity feed */
  .activity-feed { max-height: 150px; }
  .activity-feed__item { font-size: 10px; }

  /* Run cards */
  .run-card { padding: 8px 10px; }
  .run-card__header { flex-wrap: wrap; gap: 4px; }
  .run-card__id { font-size: 9px; }
  .run-card__workflow { font-size: 11px; }
  .run-card__meta { flex-wrap: wrap; gap: 6px; font-size: 9px; }

  /* Modal */
  .modal {
    min-width: unset;
    max-width: 95vw;
    margin: 8px;
    padding: 16px;
  }
  .modal h3 { font-size: 12px; }

  /* Kanban */
  .kanban__workflow { padding: 10px; }
  .kanban__title { font-size: 10px; }
  .kanban__step { padding: 6px 8px; }
  .kanban__step-name { font-size: 10px; }

  /* System metrics */
  .metric-bar__label { font-size: 9px; }
  .metric-bar__value { font-size: 10px; }

  /* Cost charts */
  .cost-chart { padding: 10px; }
  .cost-chart__title { font-size: 9px; }

  /* Section title */
  .section-title { font-size: 10px; margin: 12px 0 8px; }
}

/* Delete button on run card */
.run-card__delete {
  position: absolute;
  bottom: 8px;
  right: 8px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  opacity: 0.5;
  transition: opacity 0.2s;
  padding: 4px 8px;
  border-radius: 4px;
}

.run-card__delete:hover {
  opacity: 1;
  background: rgba(239, 68, 68, 0.1);
}

.run-card__delete:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Activity Modal */
.modal--large {
  max-width: 800px;
  max-height: 80vh;
  overflow-y: auto;
}

.activity-stats {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
}

.activity-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.activity-item {
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 12px;
}

.activity-item__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.activity-badge {
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.activity-badge--done {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
}

.activity-badge--failed {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
}

.activity-badge--pending {
  background: rgba(251, 191, 36, 0.2);
  color: #fbbf24;
}

.activity-badge--running {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}

.activity-workflow {
  font-weight: 600;
  color: var(--text-primary);
}

.activity-step {
  color: var(--text-secondary);
  font-size: 13px;
}

.activity-date {
  margin-left: auto;
  color: var(--text-muted);
  font-size: 12px;
}

.activity-item__task {
  color: var(--text-secondary);
  font-size: 13px;
  margin-bottom: 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.activity-item__output {
  margin-top: 8px;
}

.activity-item__output summary {
  cursor: pointer;
  font-size: 12px;
  color: var(--text-muted);
}

.activity-item__output pre {
  margin-top: 8px;
  padding: 8px;
  background: var(--bg-dark);
  border-radius: 4px;
  font-size: 11px;
  max-height: 200px;
  overflow-y: auto;
  white-space: pre-wrap;
}

.activity-item__sessions {
  margin-top: 8px;
  font-size: 12px;
  color: var(--text-muted);
}

.empty-state {
  text-align: center;
  padding: 32px;
  color: var(--text-muted);
}

/* Live Progress Panel */
.live-progress-panel {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 320px;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  z-index: 1000;
  overflow: hidden;
}

.live-progress-panel__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-dark);
  border-bottom: 1px solid var(--border-color);
}

.live-progress-panel__header h3 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
}

.live-progress-panel__close {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 20px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.live-progress-panel__close:hover {
  color: var(--text-primary);
}

.live-progress-panel__content {
  padding: 16px;
}

.live-progress-panel__loading {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-muted);
  font-size: 13px;
}

.live-progress-panel__step {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
}

.live-progress-panel__step .label {
  color: var(--text-muted);
  font-size: 12px;
}

.live-progress-panel__step .value {
  font-weight: 600;
  color: var(--accent-color);
  font-size: 13px;
}

.live-progress-panel__progress {
  margin-bottom: 16px;
}

.progress-bar {
  height: 8px;
  background: var(--bg-dark);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 4px;
}

.progress-bar__fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent-color), var(--success-color));
  border-radius: 4px;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 12px;
  color: var(--text-muted);
}

.live-progress-panel__file {
  margin-bottom: 12px;
}

.live-progress-panel__file .label {
  display: block;
  color: var(--text-muted);
  font-size: 11px;
  margin-bottom: 4px;
}

.live-progress-panel__file .value {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.live-progress-panel__updated {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.live-progress-panel__status {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.status-indicator--active {
  background: var(--accent-color);
  animation: pulse 1.5s infinite;
}

.status-indicator--done {
  background: var(--success-color);
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.2); }
}

.live-progress-panel__empty {
  text-align: center;
  color: var(--text-muted);
  font-size: 13px;
  padding: 20px;
}
/* ── Chat Markdown Styles ── */
.chat-msg__markdown { white-space: normal; }
.chat-msg__markdown p { margin: 0 0 8px 0; }
.chat-msg__markdown p:last-child { margin-bottom: 0; }
.chat-msg__markdown strong { color: var(--neon-cyan); font-weight: 700; }
.chat-msg__markdown em { color: var(--neon-purple); font-style: italic; }
.chat-msg__markdown code {
  background: rgba(0,255,65,0.08);
  color: var(--neon-green);
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 11px;
}
.chat-msg__markdown pre {
  background: #0a0a14;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 10px 12px;
  margin: 6px 0;
  overflow-x: auto;
  font-size: 11px;
  line-height: 1.5;
}
.chat-msg__markdown pre code {
  background: none;
  padding: 0;
  color: var(--neon-green);
}
.chat-msg__markdown ul, .chat-msg__markdown ol {
  margin: 4px 0;
  padding-left: 20px;
}
.chat-msg__markdown li { margin: 2px 0; }
.chat-msg__markdown a {
  color: var(--neon-cyan);
  text-decoration: underline;
  text-underline-offset: 2px;
}
.chat-msg__markdown a:hover { color: var(--neon-green); }
.chat-msg__markdown blockquote {
  border-left: 3px solid var(--neon-purple);
  padding-left: 12px;
  margin: 6px 0;
  color: var(--text-dim);
}
.chat-msg__markdown table {
  border-collapse: collapse;
  margin: 6px 0;
  font-size: 11px;
  width: 100%;
}
.chat-msg__markdown th, .chat-msg__markdown td {
  border: 1px solid var(--border);
  padding: 4px 8px;
  text-align: left;
}
.chat-msg__markdown th {
  background: rgba(0,255,255,0.06);
  color: var(--neon-cyan);
  font-weight: 600;
}
.chat-msg__markdown h1, .chat-msg__markdown h2, .chat-msg__markdown h3 {
  color: var(--neon-cyan);
  margin: 8px 0 4px;
  font-size: 13px;
}
.chat-msg__markdown h1 { font-size: 15px; }
.chat-msg__markdown h2 { font-size: 14px; }
.chat-msg__markdown hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 8px 0;
}

/* ── Thinking Indicator ── */
.chat-msg__thinking {
  font-size: 9px;
  color: var(--neon-purple);
  animation: pulse-glow 1.5s ease-in-out infinite;
}
.chat-msg__thinking-bubble {
  color: var(--text-dim);
  font-size: 11px;
  font-style: italic;
}
.thinking-dots span {
  animation: thinking-bounce 1.4s infinite ease-in-out;
  display: inline-block;
  color: var(--neon-purple);
  font-weight: 700;
  font-size: 16px;
}
.thinking-dots span:nth-child(1) { animation-delay: 0s; }
.thinking-dots span:nth-child(2) { animation-delay: 0.2s; }
.thinking-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes thinking-bounce {
  0%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-4px); }
}
@keyframes pulse-glow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* ── Response Time ── */
.chat-msg__time {
  font-size: 9px;
  color: var(--text-dim);
  margin-left: auto;
  opacity: 0.6;
}
/* ── Cron Status Panel ── */
.cron-list { display: flex; flex-direction: column; gap: 4px; }
.cron-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  font-size: 11px;
}
.cron-item__dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}
.cron-item__dot--ok { background: var(--neon-green); box-shadow: 0 0 4px var(--neon-green); }
.cron-item__dot--error { background: var(--neon-red); box-shadow: 0 0 4px var(--neon-red); }
.cron-item__dot--idle { background: var(--text-dim); }
.cron-item__dot--running { background: var(--neon-cyan); box-shadow: 0 0 4px var(--neon-cyan); animation: pulse-glow 1.5s infinite; }
.cron-item__name { flex: 1; color: var(--text-primary); font-weight: 500; }
.cron-item__last { color: var(--text-dim); font-size: 10px; }
.cron-item__duration { color: var(--neon-purple); font-size: 9px; }
/* ── Performance Page ── */
.performance-page { padding: 20px; }
.perf-charts {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin: 16px 0;
}
@media (max-width: 900px) {
  .perf-charts { grid-template-columns: 1fr; }
}

/* Model Limits Panel */
.model-limits { display: flex; flex-direction: column; gap: 8px; }
.model-limit-item {
  padding: 8px 12px;
  border-left: 3px solid var(--border);
  background: rgba(255,255,255,0.02);
  border-radius: 0 4px 4px 0;
}
.model-limit-item__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}
.model-limit-item__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.model-limit-item__name {
  font-weight: 600;
  color: var(--text);
  font-size: 13px;
}
.model-limit-item__plan {
  font-size: 11px;
  color: var(--cyan);
  background: rgba(0,255,255,0.1);
  padding: 1px 6px;
  border-radius: 3px;
}
.model-limit-item__cost {
  font-size: 11px;
  color: var(--text-muted);
  margin-left: auto;
}
.model-limit-item__details {
  display: flex;
  gap: 12px;
  font-size: 11px;
  color: var(--text-dim);
}
.model-limit-item__agents { color: var(--text-muted); }
.model-limit-item__usage { color: var(--green); }
.model-limit-item__today-cost { color: var(--orange); }
.model-limit-item__models {
  display: flex;
  gap: 4px;
  margin-top: 4px;
}
.model-limit-item__model-badge {
  font-size: 10px;
  padding: 1px 5px;
  border-radius: 3px;
  background: rgba(255,255,255,0.05);
  color: var(--text-dim);
}
.model-limit-item__model-badge--available { color: var(--green); }
.model-limit-item__model-badge--active { color: var(--cyan); }
.model-limit-item__note {
  font-size: 10px;
  color: var(--text-dim);
  margin-top: 3px;
  font-style: italic;
}

/* Quota Progress Bar */
.quota-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
}
.quota-bar__track {
  flex: 1;
  height: 6px;
  background: rgba(255,255,255,0.08);
  border-radius: 3px;
  overflow: hidden;
}
.quota-bar__fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.5s ease;
}
.quota-bar__label {
  font-size: 10px;
  color: var(--text-muted);
  white-space: nowrap;
  min-width: 50px;
  text-align: right;
}

/* ═══════════════════════════════════════════════════
   TASK BOARD (Kanban)
   ═══════════════════════════════════════════════════ */
.tasks-page__header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 16px;
}
.tasks-page__header h2 { margin: 0; }
.tasks-page__stats { display: flex; gap: 8px; flex: 1; }
.stat-badge {
  font-size: 10px;
  text-transform: uppercase;
  color: var(--text-dim);
  background: var(--bg-card);
  border: 1px solid var(--border);
  padding: 3px 8px;
  border-radius: 3px;
}

.task-board {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding-bottom: 12px;
  min-height: 400px;
}
.task-board__column {
  min-width: 200px;
  flex: 1;
  background: rgba(10,10,20,0.4);
  border: 1px solid var(--border);
  border-radius: 6px;
  display: flex;
  flex-direction: column;
}
.task-board__column-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}
.task-board__column-title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--neon-cyan);
  font-weight: 600;
}
.task-board__column-count {
  font-size: 10px;
  color: var(--text-dim);
  background: var(--bg-primary);
  padding: 1px 6px;
  border-radius: 8px;
}
.task-board__cards {
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
  overflow-y: auto;
  max-height: calc(100vh - 240px);
}

.task-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 10px;
  cursor: pointer;
  transition: all 0.15s;
}
.task-card:hover {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 8px rgba(0,255,255,0.1);
}
.task-card--moving { opacity: 0.5; }
.task-card__header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}
.task-card__priority {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}
.task-card__title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.task-card__desc {
  font-size: 10px;
  color: var(--text-dim);
  margin-bottom: 6px;
  line-height: 1.3;
}
.task-card__footer {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 9px;
}
.task-card__agent {
  color: var(--neon-purple);
  text-transform: uppercase;
  font-weight: 600;
}
.task-card__images {
  color: var(--neon-orange);
  font-weight: 500;
}
.task-card__arrows {
  margin-left: auto;
  display: flex;
  gap: 2px;
}
.task-card__arrow {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  color: var(--text-dim);
  width: 20px;
  height: 20px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  padding: 0;
}
.task-card__arrow:hover {
  border-color: var(--neon-cyan);
  color: var(--neon-cyan);
}

/* Active task indicator */
.task-card--active {
  border-color: var(--neon-green, #0f0);
  box-shadow: 0 0 12px rgba(0,255,100,0.15);
  animation: taskPulse 2s ease-in-out infinite;
}
@keyframes taskPulse {
  0%, 100% { box-shadow: 0 0 6px rgba(0,255,100,0.1); }
  50% { box-shadow: 0 0 14px rgba(0,255,100,0.25); }
}
.task-card__meta {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
  font-size: 9px;
}
.task-card__time {
  color: var(--text-dim);
  display: flex;
  align-items: center;
  gap: 4px;
}
.task-card__pulse {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--neon-green, #0f0);
  animation: dotPulse 1.5s ease-in-out infinite;
  display: inline-block;
}
@keyframes dotPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(0.7); }
}
.task-card__agent-badge {
  background: rgba(128,0,255,0.15);
  color: var(--neon-purple);
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
}

/* Task Detail Modal */
.task-detail-modal { max-width: 550px; }
.task-detail-modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}
.task-detail-modal__header h3 { margin: 0; color: var(--neon-cyan); font-size: 14px; }
.task-detail-modal__images { margin-top: 12px; }
.task-detail-modal__thumbs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 6px;
}
.task-detail-modal__thumb {
  position: relative;
  width: 80px;
  height: 60px;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid var(--border);
}
.task-detail-modal__thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.task-detail-modal__thumb-delete {
  position: absolute;
  top: 2px;
  right: 2px;
  background: rgba(0,0,0,0.7);
  color: var(--neon-red);
  border: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  font-size: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}
.task-detail-modal__upload {
  margin-top: 12px;
}
.task-detail-modal__upload input[type=file] {
  margin-top: 4px;
  font-size: 11px;
  color: var(--text-dim);
}

/* ── Approval Panel ── */
.approval-panel {
  background: rgba(255,165,0,0.06);
  border: 1px solid var(--neon-orange);
  border-radius: 6px;
  padding: 14px;
  margin-bottom: 16px;
}
.approval-panel__title {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--neon-orange);
  letter-spacing: 0.1em;
  margin-bottom: 10px;
  font-weight: 600;
}
.approval-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  margin-bottom: 6px;
}
.approval-item__info { flex: 1; }
.approval-item__step {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
}
.approval-item__input {
  font-size: 10px;
  color: var(--text-dim);
  margin-top: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 300px;
}
.approval-item__actions { display: flex; gap: 6px; }
.approval-item__btn {
  padding: 4px 12px;
  border: 1px solid var(--border);
  border-radius: 3px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  font-family: var(--font);
  transition: all 0.15s;
}
.approval-item__btn--approve {
  background: rgba(0,255,65,0.1);
  color: var(--neon-green);
  border-color: var(--neon-green);
}
.approval-item__btn--approve:hover { box-shadow: 0 0 8px rgba(0,255,65,0.3); }
.approval-item__btn--reject {
  background: rgba(255,0,64,0.1);
  color: var(--neon-red);
  border-color: var(--neon-red);
}
.approval-item__btn--reject:hover { box-shadow: 0 0 8px rgba(255,0,64,0.3); }

/* Tab badge */
.tab-nav__badge {
  background: var(--neon-orange);
  color: var(--bg-primary);
  font-size: 8px;
  font-weight: 700;
  padding: 1px 5px;
  border-radius: 8px;
  margin-left: 4px;
  animation: pulse-glow 1.5s infinite;
}

/* ── Responsive Task Board ── */
@media (max-width: 768px) {
  .task-board { flex-direction: column; }
  .task-board__column { min-width: unset; }
  .tasks-page__header { flex-wrap: wrap; gap: 8px; }
}

/* ── Approval Panel ── */
.approval-panel {
  background: rgba(255, 200, 0, 0.08);
  border: 1px solid rgba(255, 200, 0, 0.3);
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 16px;
}
.approval-panel__title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #ffc800;
  margin-bottom: 8px;
}
.approval-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  margin-bottom: 4px;
}
.approval-item:last-child { margin-bottom: 0; }
.approval-item__info { flex: 1; min-width: 0; }
.approval-item__step {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-primary, #e0e0e0);
}
.approval-item__input {
  font-size: 10px;
  color: var(--text-dim, #888);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 400px;
}
.approval-item__actions { display: flex; gap: 6px; }
.approval-item__btn {
  padding: 4px 10px;
  font-size: 10px;
  font-weight: 700;
  border: 1px solid transparent;
  border-radius: 3px;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-family: var(--font, monospace);
}
.approval-item__btn--approve {
  background: rgba(0, 200, 80, 0.2);
  color: #00c850;
  border-color: rgba(0, 200, 80, 0.4);
}
.approval-item__btn--approve:hover {
  background: rgba(0, 200, 80, 0.35);
}
.approval-item__btn--reject {
  background: rgba(255, 60, 60, 0.2);
  color: #ff3c3c;
  border-color: rgba(255, 60, 60, 0.4);
}
.approval-item__btn--reject:hover {
  background: rgba(255, 60, 60, 0.35);
}


/* ── Live Update Indicators ──────────────────────────────── */
.rd-status-pulse {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: currentColor;
  margin-right: 4px;
  animation: statusPulse 1.5s ease-in-out infinite;
}
@keyframes statusPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.3; transform: scale(0.6); }
}

.rd-refresh-indicator {
  font-size: 10px;
  color: var(--text-dim);
  margin-left: auto;
  transition: color 0.3s;
}
.rd-refresh-indicator--active {
  color: var(--neon-cyan);
}

.rd-story-progress {
  display: flex;
  align-items: center;
  gap: 6px;
}
.rd-story-bar {
  width: 60px;
  height: 4px;
  background: var(--bg-primary);
  border-radius: 2px;
  overflow: hidden;
}
.rd-story-fill {
  height: 100%;
  background: var(--neon-green, #0f0);
  border-radius: 2px;
  transition: width 0.5s ease;
}

.rd-current-story {
  color: var(--neon-orange);
  font-weight: 600;
  font-size: 10px;
}

/* Task card active state (if not already added) */

/* ── RunCard Story Progress ──────────────────────────────── */
.run-card__story-progress {
  display: flex;
  align-items: center;
  gap: 4px;
}
.run-card__story-bar {
  width: 40px;
  height: 3px;
  background: var(--bg-primary);
  border-radius: 2px;
  overflow: hidden;
}
.run-card__story-fill {
  height: 100%;
  background: var(--neon-green, #0f0);
  border-radius: 2px;
  transition: width 0.5s ease;
}
.run-card__current-story {
  color: var(--neon-orange);
  font-weight: 600;
  font-size: 10px;
}


/* Agent Chat message timestamps */
.rd-msg-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 2px;
}
.rd-msg-time {
  font-size: 9px;
  color: var(--text-dim);
  font-family: monospace;
}

/* ========== [9] PROJECTS PAGE ========== */
.projects-page { padding: 20px; }

.projects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.project-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s;
}
.project-card:hover {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 12px rgba(0, 255, 255, 0.1);
}
.project-card--selected {
  border-color: var(--neon-orange);
  box-shadow: 0 0 16px rgba(255, 102, 0, 0.15);
}
.project-card--online { border-left: 3px solid var(--neon-green); }
.project-card--offline { border-left: 3px solid var(--neon-red); }

.project-card__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
.project-card__emoji { font-size: 20px; }
.project-card__name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-primary);
  flex: 1;
}
.project-card__status {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.08em;
  padding: 2px 8px;
  border-radius: 3px;
}
.project-card__status--active {
  color: var(--neon-green);
  background: rgba(0, 255, 65, 0.08);
}
.project-card__status--inactive,
.project-card__status--unknown {
  color: var(--neon-red);
  background: rgba(255, 0, 64, 0.08);
}

.project-card__desc {
  font-size: 11px;
  color: var(--text-dim);
  line-height: 1.5;
  margin-bottom: 12px;
}

.project-card__meta { display: flex; flex-direction: column; gap: 6px; }
.project-card__meta-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
}
.project-card__label {
  color: var(--neon-orange);
  font-weight: 600;
  font-size: 9px;
  letter-spacing: 0.1em;
  min-width: 50px;
}
.project-card__value { color: var(--text-primary); }
.project-card__link {
  color: var(--neon-cyan);
  text-decoration: none;
}
.project-card__link:hover { text-decoration: underline; }

.project-card__tags { display: flex; flex-wrap: wrap; gap: 4px; }
.project-card__tag {
  font-size: 9px;
  padding: 1px 6px;
  border-radius: 2px;
  background: rgba(0, 255, 255, 0.06);
  color: var(--neon-cyan);
  border: 1px solid rgba(0, 255, 255, 0.15);
}

/* Project Detail Panel */
.project-detail {
  background: var(--bg-card);
  border: 1px solid var(--neon-orange);
  border-radius: 4px;
  padding: 20px;
  margin-top: 8px;
  animation: slideDown 0.2s ease-out;
}
@keyframes slideDown {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}

.project-detail__header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}
.project-detail__emoji { font-size: 28px; }
.project-detail__title {
  font-size: 18px;
  font-weight: 700;
  color: var(--neon-orange);
  flex: 1;
  margin: 0;
}
.project-detail__close {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-dim);
  font-size: 14px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 3px;
}
.project-detail__close:hover {
  color: var(--neon-red);
  border-color: var(--neon-red);
}

.project-detail__grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}
@media (max-width: 900px) {
  .project-detail__grid { grid-template-columns: 1fr; }
}

.project-detail__section h4 {
  color: var(--neon-cyan);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin: 0 0 10px 0;
  padding-bottom: 4px;
  border-bottom: 1px solid var(--border);
}

.project-detail__table {
  width: 100%;
  font-size: 11px;
  border-collapse: collapse;
}
.project-detail__table td {
  padding: 4px 0;
  vertical-align: top;
}
.project-detail__table td:first-child {
  color: var(--text-dim);
  width: 110px;
  font-weight: 600;
}
.project-detail__table td:last-child { color: var(--text-primary); }
.project-detail__table a {
  color: var(--neon-cyan);
  text-decoration: none;
}
.project-detail__table code {
  font-size: 10px;
  background: rgba(255, 255, 255, 0.04);
  padding: 1px 4px;
  border-radius: 2px;
}

.project-detail__prd {
  font-size: 11px;
  color: var(--text-dim);
  line-height: 1.6;
  margin: 0;
}

.project-detail__list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.project-detail__list li {
  font-size: 11px;
  color: var(--text-dim);
  padding: 3px 0;
  padding-left: 16px;
  position: relative;
}
.project-detail__list li::before {
  content: "▸";
  position: absolute;
  left: 0;
  color: var(--neon-cyan);
}

.project-detail__list--tasks li::before { content: ""; }
.project-detail__task-check {
  color: var(--neon-green);
  margin-right: 6px;
  font-size: 10px;
}

/* Tools Bar - External services link bar */
.tools-bar {
  margin-bottom: 2rem;
  padding: 1rem 1.5rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
}

.tools-bar__label {
  display: block;
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  color: rgba(255, 255, 255, 0.35);
  margin-bottom: 0.75rem;
  font-weight: 600;
}

.tools-bar__links {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tools-bar__item {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.75);
  text-decoration: none;
  font-size: 0.8rem;
  transition: all 0.2s ease;
}

.tools-bar__item:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
  color: #fff;
  transform: translateY(-1px);
}

.tools-bar__item--offline {
  opacity: 0.5;
}

.tools-bar__logo {
  width: 18px;
  height: 18px;
  object-fit: contain;
}

.tools-bar__emoji {
  font-size: 1.1rem;
  line-height: 1;
}

.tools-bar__name {
  font-weight: 500;
}

.tools-bar__dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.tools-bar__dot--active {
  background: #00ff88;
  box-shadow: 0 0 6px rgba(0, 255, 136, 0.5);
}

.tools-bar__dot--inactive,
.tools-bar__dot--unknown {
  background: rgba(255, 255, 255, 0.25);
}

/* Project Delete Button */
.project-card { position: relative; }
.project-card__delete {
  position: absolute;
  top: 8px;
  right: 8px;
  background: transparent;
  border: 1px solid rgba(248, 81, 73, 0.3);
  color: #f85149;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 2px 8px;
  border-radius: 2px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s, background 0.2s;
}
.project-card:hover .project-card__delete { opacity: 1; }
.project-card__delete:hover {
  background: rgba(248, 81, 73, 0.15);
  border-color: #f85149;
}

/* Delete Modal */
.delete-modal { max-width: 500px; }
.delete-modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}
.delete-modal__header h3 { color: #f85149; margin: 0; font-size: 16px; }
.delete-modal__body { padding: 20px; }
.delete-modal__warning {
  background: rgba(248, 81, 73, 0.08);
  border: 1px solid rgba(248, 81, 73, 0.25);
  border-radius: 4px;
  padding: 12px;
  margin-bottom: 16px;
  color: var(--text-primary);
  font-size: 13px;
}
.delete-modal__list {
  list-style: none;
  padding: 0;
  margin: 0 0 16px;
  font-size: 12px;
  color: var(--text-secondary);
}
.delete-modal__list li {
  padding: 4px 0;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}
.delete-modal__list code {
  color: var(--neon-cyan);
  font-size: 11px;
}
.delete-modal__confirm { margin-bottom: 16px; }
.delete-modal__confirm label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}
.delete-modal__confirm input {
  width: 100%;
  padding: 8px 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-primary);
  font-size: 14px;
  font-family: inherit;
}
.delete-modal__confirm input:focus {
  outline: none;
  border-color: #f85149;
}
.delete-modal__result {
  padding: 10px;
  border-radius: 4px;
  font-size: 12px;
  margin-top: 12px;
}
.delete-modal__result--success {
  background: rgba(35, 134, 54, 0.15);
  border: 1px solid rgba(35, 134, 54, 0.4);
  color: #3fb950;
}
.delete-modal__result--error {
  background: rgba(248, 81, 73, 0.1);
  border: 1px solid rgba(248, 81, 73, 0.3);
  color: #f85149;
}

/* Danger button */
.btn--danger {
  background: rgba(248, 81, 73, 0.15);
  border-color: #f85149;
  color: #f85149;
}
.btn--danger:hover:not(:disabled) {
  background: #f85149;
  color: #fff;
}
.btn--danger:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* ── Workflow Tabs ── */
.wf-tabs {
  display: flex;
  gap: 2px;
  margin-bottom: 16px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.wf-tabs::-webkit-scrollbar { display: none; }

.wf-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--text-dim);
  font-size: 11px;
  font-family: var(--font-mono, 'JetBrains Mono', monospace);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.2s;
}
.wf-tab:hover {
  color: var(--text-primary);
  background: rgba(255,255,255,0.02);
}
.wf-tab--active {
  color: var(--neon-cyan);
  border-bottom-color: var(--neon-cyan);
}
.wf-tab--run {
  max-width: 280px;
}
.wf-tab--run.wf-tab--active {
  color: var(--neon-green);
  border-bottom-color: var(--neon-green);
}

.wf-tab__pulse {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--neon-green);
  animation: pulse-glow 2s ease-in-out infinite;
  flex-shrink: 0;
}

.wf-tab__label {
  overflow: hidden;
  text-overflow: ellipsis;
}

.wf-tab__progress {
  font-size: 9px;
  color: var(--text-dim);
  background: rgba(255,255,255,0.04);
  padding: 1px 5px;
  border-radius: 3px;
  flex-shrink: 0;
}
.wf-tab--active .wf-tab__progress {
  background: rgba(0,255,65,0.1);
  color: var(--neon-green);
}

.wf-overview {
  animation: fadeIn 0.2s ease;
}

.wf-run-panel {
  animation: fadeIn 0.2s ease;
}
.wf-run-panel .rd-back {
  display: none;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 768px) {
  .wf-tab { padding: 6px 10px; font-size: 10px; }
  .wf-tab--run { max-width: 180px; }
}

/* ── Antfarm Activity Panel ── */
.af-page {
  padding: 0 8px;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}
.af-page__header { margin-bottom: 16px; }
.af-page__subtitle {
  font-size: 11px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 4px;
}

.af-section { margin-bottom: 20px; flex-shrink: 0; }
.af-section__title {
  font-size: 10px;
  font-weight: 700;
  color: var(--neon-orange);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 10px;
  padding-bottom: 4px;
  border-bottom: 1px dashed rgba(255, 102, 0, 0.2);
}

/* Agent Mini Grid (2x5) */
.af-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}
.af-agent-card {
  background: var(--bg-card);
  border: 1px dashed var(--border);
  border-radius: 4px;
  padding: 10px;
  transition: border-color 0.2s, background 0.2s;
}
.af-agent-card:hover {
  background: var(--bg-card-hover);
  border-color: rgba(255, 255, 255, 0.1);
}
.af-agent-card--active { border-color: rgba(0, 255, 65, 0.3); }
.af-agent-card--workflow { border-color: rgba(68, 136, 255, 0.4); }

.af-agent-card__top {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}
.af-agent-card__emoji { font-size: 16px; }
.af-agent-card__name {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-primary);
  flex: 1;
}
.af-agent-card__badge {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 1px 5px;
  border-radius: 2px;
  text-transform: uppercase;
}
.af-agent-card__badge--active {
  background: rgba(0, 255, 65, 0.12);
  color: #00ff41;
  border: 1px solid rgba(0, 255, 65, 0.25);
}
.af-agent-card__badge--idle {
  background: rgba(102, 102, 128, 0.1);
  color: #666680;
  border: 1px solid rgba(102, 102, 128, 0.2);
}
.af-agent-card__badge--workflow {
  background: rgba(68, 136, 255, 0.12);
  color: #4488ff;
  border: 1px solid rgba(68, 136, 255, 0.25);
  animation: pulse-glow 2s ease-in-out infinite;
}
.af-agent-card__model {
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}
.af-agent-card__time {
  font-size: 9px;
  color: var(--text-dim);
  margin-top: 2px;
}
.af-agent-card__workflow {
  font-size: 8px;
  color: #4488ff;
  margin-top: 3px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Bottom 3-column layout */
.af-bottom {
  display: grid;
  grid-template-columns: 1.2fr 1fr 0.8fr;
  gap: 12px;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}
.af-bottom__col {
  background: var(--bg-card);
  border: 1px dashed var(--border);
  border-radius: 4px;
  padding: 12px;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Pipeline View */
.af-pipeline { display: flex; flex-direction: column; gap: 12px; overflow-y: auto; flex: 1; }
.af-pipeline__run {
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  padding: 10px;
  background: rgba(0, 0, 0, 0.2);
}
.af-pipeline__run--running { border-color: rgba(0, 255, 65, 0.2); }
.af-pipeline__run--completed { border-color: rgba(0, 255, 65, 0.1); }
.af-pipeline__run--failed { border-color: rgba(255, 0, 64, 0.2); }

.af-pipeline__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}
.af-pipeline__status {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 1px 6px;
  border-radius: 2px;
  display: flex;
  align-items: center;
  gap: 4px;
}
.af-pipeline__status--running { background: rgba(0, 255, 65, 0.12); color: #00ff41; }
.af-pipeline__status--completed { background: rgba(0, 255, 65, 0.08); color: #00ff41; }
.af-pipeline__status--failed { background: rgba(255, 0, 64, 0.12); color: #ff0040; }
.af-pipeline__wf {
  font-size: 10px;
  color: var(--neon-cyan);
  font-weight: 600;
}
.af-pipeline__task {
  font-size: 10px;
  color: var(--text-dim);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Pipeline steps row */
.af-pipeline__steps {
  display: flex;
  align-items: center;
  gap: 1px;
  overflow-x: auto;
  padding: 4px 0;
  scrollbar-width: thin;
}
.af-step-wrapper {
  display: flex;
  align-items: center;
  gap: 1px;
}
.af-step-arrow {
  color: var(--text-dim);
  font-size: 8px;
  flex-shrink: 0;
}
.af-step {
  position: relative;
  padding: 4px 5px;
  border-radius: 3px;
  text-align: center;
  min-width: 36px;
  flex-shrink: 1;
}
.af-step__label {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.5px;
}
.af-step__agent {
  font-size: 7px;
  color: rgba(255, 255, 255, 0.4);
  margin-top: 1px;
}
.af-step--pending {
  background: rgba(102, 102, 128, 0.08);
  border: 1px solid rgba(102, 102, 128, 0.15);
  color: #666680;
}
.af-step--running {
  background: rgba(68, 136, 255, 0.12);
  border: 1px solid rgba(68, 136, 255, 0.3);
  color: #4488ff;
  animation: step-pulse 2s ease-in-out infinite;
}
.af-step--done {
  background: rgba(0, 255, 65, 0.08);
  border: 1px solid rgba(0, 255, 65, 0.2);
  color: #00ff41;
}
.af-step--failed {
  background: rgba(255, 0, 64, 0.1);
  border: 1px solid rgba(255, 0, 64, 0.25);
  color: #ff0040;
}
.af-step__pulse {
  position: absolute;
  inset: -2px;
  border-radius: 5px;
  border: 1px solid rgba(68, 136, 255, 0.4);
  animation: pulse-glow 2s ease-in-out infinite;
  pointer-events: none;
}
.af-step__retry {
  position: absolute;
  top: -4px;
  right: -4px;
  font-size: 7px;
  background: var(--neon-orange);
  color: #000;
  padding: 0 3px;
  border-radius: 2px;
  font-weight: 700;
}
@keyframes step-pulse {
  0%, 100% { box-shadow: 0 0 4px rgba(68, 136, 255, 0.2); }
  50% { box-shadow: 0 0 12px rgba(68, 136, 255, 0.4); }
}

/* Story progress bar */
.af-pipeline__progress {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
}
.af-pipeline__progress-bar {
  flex: 1;
  height: 4px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 2px;
  overflow: hidden;
}
.af-pipeline__progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--neon-green), var(--neon-cyan));
  border-radius: 2px;
  transition: width 0.5s ease;
}
.af-pipeline__progress-text {
  font-size: 9px;
  color: var(--text-dim);
  white-space: nowrap;
}

/* Activity Feed */
.af-feed { display: flex; flex-direction: column; flex: 1; overflow: hidden; }
.af-feed__controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.af-feed__pause {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 2px 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  background: transparent;
  color: var(--text-dim);
  cursor: pointer;
  font-family: inherit;
  transition: all 0.2s;
}
.af-feed__pause:hover { border-color: var(--neon-cyan); color: var(--neon-cyan); }
.af-feed__pause--active { background: rgba(255, 102, 0, 0.12); border-color: var(--neon-orange); color: var(--neon-orange); }
.af-feed__count { font-size: 9px; color: var(--text-dim); }
.af-feed__list {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: thin;
}
.af-feed__item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  font-size: 10px;
}
.af-feed__item:hover { background: rgba(255, 255, 255, 0.02); }
.af-feed__time {
  color: var(--text-dim);
  font-size: 9px;
  white-space: nowrap;
  flex-shrink: 0;
}
.af-feed__date {
  color: rgba(255, 255, 255, 0.2);
  margin-right: 3px;
}
.af-feed__agent {
  font-size: 9px;
  font-weight: 600;
  color: var(--neon-cyan);
  min-width: 55px;
  flex-shrink: 0;
}
.af-feed__badge {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.3px;
  padding: 1px 4px;
  border: 1px solid;
  border-radius: 2px;
  white-space: nowrap;
  flex-shrink: 0;
}
.af-feed__detail {
  color: var(--text-dim);
  font-size: 9px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

/* Stats & Alerts */
.af-stats { display: flex; flex-direction: column; gap: 10px; overflow-y: auto; }
.af-stats__agents-title {
  font-size: 9px;
  font-weight: 700;
  color: var(--neon-cyan);
  letter-spacing: 1.5px;
  text-transform: uppercase;
}
.af-stats__alert {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 8px;
  background: rgba(255, 0, 64, 0.06);
  border: 1px dashed rgba(255, 0, 64, 0.2);
  border-radius: 4px;
}
.af-stats__alert-item {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 2px 6px;
  border-radius: 2px;
}
.af-stats__alert-item--orange { background: rgba(255, 102, 0, 0.15); color: var(--neon-orange); }
.af-stats__alert-item--yellow { background: rgba(255, 170, 0, 0.12); color: #ffaa00; }
.af-stats__alert-item--red { background: rgba(255, 0, 64, 0.12); color: var(--neon-red); }

.af-stats__agents {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.af-stats__agent {
  padding: 7px 9px;
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 3px;
}
.af-stats__agent-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 3px;
}
.af-stats__agent-identity {
  display: flex;
  align-items: center;
  gap: 6px;
}
.af-stats__agent-emoji {
  font-size: 14px;
}
.af-stats__agent-name {
  font-size: 11px;
  font-weight: 700;
  color: var(--text-primary);
  text-transform: capitalize;
}
.af-stats__agent-desc {
  font-size: 8px;
  color: var(--text-dim);
  letter-spacing: 0.3px;
  margin-top: 2px;
  margin-bottom: 4px;
}
.af-stats__agent-bar {
  height: 3px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 4px;
}
.af-stats__agent-bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.5s ease;
}
.af-stats__agent-bar-fill--good { background: linear-gradient(90deg, #00ff41, #00cc33); }
.af-stats__agent-bar-fill--mid { background: linear-gradient(90deg, #ffaa00, #ff8800); }
.af-stats__agent-bar-fill--bad { background: linear-gradient(90deg, #ff0040, #cc0033); }
.af-stats__agent-last {
  font-size: 8px;
  color: rgba(255, 255, 255, 0.25);
  margin-top: 2px;
}
.af-stats__agent-rate {
  font-size: 10px;
  font-weight: 700;
  padding: 0 4px;
  border-radius: 2px;
}
.af-stats__agent-rate--good { color: #00ff41; background: rgba(0, 255, 65, 0.08); }
.af-stats__agent-rate--mid { color: #ffaa00; background: rgba(255, 170, 0, 0.08); }
.af-stats__agent-rate--bad { color: #ff0040; background: rgba(255, 0, 64, 0.08); }
.af-stats__agent-row {
  display: flex;
  gap: 8px;
}
.af-stats__agent-stat {
  font-size: 9px;
  color: var(--text-dim);
}
.af-stats__agent-stat--red { color: #ff0040; }
.af-stats__agent-stat--orange { color: var(--neon-orange); }

.af-stats__recent { margin-top: 4px; }
.af-stats__recent-title {
  font-size: 9px;
  font-weight: 700;
  color: var(--neon-orange);
  letter-spacing: 1px;
  margin-bottom: 6px;
}
.af-stats__recent-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 0;
  font-size: 9px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}
.af-stats__recent-time { color: var(--text-dim); white-space: nowrap; flex-shrink: 0; }
.af-stats__recent-type {
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
}
.af-stats__recent-type--orange { color: var(--neon-orange); }
.af-stats__recent-type--red { color: var(--neon-red); }
.af-stats__recent-detail {
  color: var(--text-dim);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Empty state */
.af-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80px;
  font-size: 11px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}

/* Pulse dot */
.af-pulse {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #00ff41;
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Responsive */
@media (max-width: 1200px) {
  .af-grid { grid-template-columns: repeat(5, 1fr); gap: 6px; }
  .af-bottom {
  max-height: 420px; grid-template-columns: 1fr 1fr; }
  .af-bottom__col--stats { grid-column: 1 / -1; }
}
@media (max-width: 768px) {
  .af-grid { grid-template-columns: repeat(3, 1fr); }
  .af-bottom {
  max-height: 420px; grid-template-columns: 1fr; }
  .af-agent-card { padding: 8px; }
}
@media (max-width: 480px) {
  .af-grid { grid-template-columns: repeat(2, 1fr); }
}

/* ========================================
   PIXEL OFFICE
   ======================================== */

.pixel-office {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 8px;
  height: 100%;
}

.pixel-office__canvas-wrap {
  position: relative;
  border: 2px solid var(--border);
  border-radius: 4px;
  background: #0a0a14;
  overflow: hidden;
  max-width: 100%;
}

.pixel-office__canvas {
  display: block;
  width: 1100px;
  max-width: 100%;
  height: auto;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

.pixel-office__error {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(255, 60, 60, 0.1);
  border: 1px solid rgba(255, 60, 60, 0.3);
  border-radius: 4px;
  color: #ff6666;
  font-size: 11px;
  font-family: var(--font-mono);
}

.pixel-office__error-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: rgba(255, 60, 60, 0.2);
  color: #ff4444;
  font-weight: bold;
  font-size: 10px;
}

@media (max-width: 1200px) {
  .pixel-office__canvas {
    width: 100%;
  }
}

/* Pixel Office — Chat Overlay */
.pixel-office__chat-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  cursor: pointer;
}

.pixel-office__chat-overlay-content {
  background: #1a1a2e;
  border: 2px solid #334466;
  border-radius: 8px;
  padding: 16px 20px;
  max-width: 640px;
  min-width: 300px;
  max-height: 420px;
  overflow-y: auto;
  color: #e0e0e0;
  font-family: var(--font-mono, monospace);
  font-size: 13px;
  line-height: 1.6;
  cursor: default;
}

.pixel-office__chat-overlay-content pre {
  background: #111122;
  border: 1px solid #333355;
  border-radius: 4px;
  padding: 8px 12px;
  overflow-x: auto;
  font-size: 12px;
}

.pixel-office__chat-overlay-content code {
  background: #111122;
  padding: 1px 4px;
  border-radius: 2px;
  font-size: 12px;
}

.pixel-office__chat-overlay-content pre code {
  background: none;
  padding: 0;
}

.pixel-office__chat-overlay-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: bold;
  font-size: 15px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #334466;
}

.pixel-office__chat-overlay-close {
  background: none;
  border: 1px solid #555;
  color: #aaa;
  width: 24px;
  height: 24px;
  border-radius: 4px;
  cursor: pointer;
  font-family: var(--font-mono, monospace);
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pixel-office__chat-overlay-close:hover {
  background: #333;
  color: #fff;
}

.pixel-office__chat-overlay-body p:first-child {
  margin-top: 0;
}

.pixel-office__chat-overlay-body p:last-child {
  margin-bottom: 0;
}

.pixel-office__canvas {
  cursor: pointer;
}

/* ========================================
   MISSION CONTROL v2 — NEW COMPONENTS
   ======================================== */

/* ── Story Checklist ── */
.story-checklist { padding: 8px 0; }
.story-checklist__loading,
.story-checklist__empty {
  padding: 12px;
  color: var(--text-dim);
  font-size: 11px;
  text-align: center;
}
.story-checklist__item {
  padding: 6px 12px;
  border-left: 2px solid var(--border);
  margin-bottom: 4px;
  transition: border-color 0.2s;
}
.story-checklist__item--done { border-left-color: var(--neon-green); }
.story-checklist__item--running { border-left-color: var(--neon-cyan); }
.story-checklist__item--failed { border-left-color: var(--neon-red); }
.story-checklist__row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.story-checklist__check {
  font-size: 14px;
  width: 18px;
  text-align: center;
  flex-shrink: 0;
}
.story-checklist__item--done .story-checklist__check { color: var(--neon-green); }
.story-checklist__item--running .story-checklist__check { color: var(--neon-cyan); animation: pulse-glow 2s ease-in-out infinite; }
.story-checklist__item--failed .story-checklist__check { color: var(--neon-red); }
.story-checklist__title {
  font-size: 12px;
  flex: 1;
}
.story-checklist__title--done {
  text-decoration: line-through;
  color: var(--neon-green);
  opacity: 0.7;
}
.story-checklist__title--running { color: var(--neon-cyan); }
.story-checklist__title--failed { color: var(--neon-red); }
.story-checklist__retry-badge {
  background: rgba(255, 102, 0, 0.2);
  color: var(--neon-orange);
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: bold;
}
.story-checklist__retry-btn {
  font-size: 9px;
  padding: 2px 6px;
}
.story-checklist__criteria {
  margin: 4px 0 0 26px;
  padding-left: 12px;
  list-style: disc;
  font-size: 10px;
  color: var(--text-dim);
}
.story-checklist__criteria li { margin-bottom: 2px; }

/* ── Plan Viewer ── */
.plan-viewer {
  max-width: 800px;
  width: 90%;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}
.plan-viewer__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
}
.plan-viewer__header h3 { font-size: 14px; color: var(--neon-cyan); }
.plan-viewer__loading,
.plan-viewer__empty {
  padding: 40px;
  text-align: center;
  color: var(--text-dim);
}
.plan-viewer__tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--border);
}
.plan-viewer__tab {
  padding: 8px 16px;
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font);
  font-size: 11px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}
.plan-viewer__tab:hover { color: var(--text-primary); }
.plan-viewer__tab--active {
  color: var(--neon-cyan);
  border-bottom-color: var(--neon-cyan);
}
.plan-viewer__body {
  padding: 16px;
  overflow-y: auto;
  flex: 1;
}
.plan-viewer__heading {
  color: var(--neon-orange);
  font-size: 13px;
  margin: 12px 0 6px;
}
.plan-viewer__field {
  display: flex;
  gap: 8px;
  margin-bottom: 4px;
  font-size: 12px;
}
.plan-viewer__key {
  color: var(--neon-cyan);
  font-weight: bold;
  white-space: nowrap;
}
.plan-viewer__val { color: var(--text-primary); }
.plan-viewer__text {
  font-size: 12px;
  margin-bottom: 4px;
  color: var(--text-primary);
}
.plan-viewer__table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.plan-viewer__table th {
  text-align: left;
  padding: 6px 8px;
  background: var(--bg-input);
  color: var(--neon-cyan);
  border-bottom: 1px solid var(--border);
  font-size: 10px;
  text-transform: uppercase;
}
.plan-viewer__table td {
  padding: 6px 8px;
  border-bottom: 1px solid var(--border);
  vertical-align: top;
}
.plan-viewer__status {
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 9px;
  font-weight: bold;
}
.plan-viewer__status--done { background: rgba(0, 255, 65, 0.15); color: var(--neon-green); }
.plan-viewer__status--running { background: rgba(0, 255, 255, 0.15); color: var(--neon-cyan); }
.plan-viewer__status--failed { background: rgba(255, 0, 64, 0.15); color: var(--neon-red); }
.plan-viewer__status--pending { background: rgba(102, 102, 128, 0.15); color: var(--text-dim); }
.plan-viewer__ac {
  margin: 0;
  padding-left: 16px;
  font-size: 10px;
  color: var(--text-dim);
}
.plan-viewer__raw {
  font-size: 11px;
  white-space: pre-wrap;
  word-break: break-word;
  background: var(--bg-input);
  padding: 12px;
  border-radius: 4px;
  max-height: 400px;
  overflow-y: auto;
}

/* ── Agent Activity Panel ── */
.agent-activity-panel {
  position: fixed;
  right: 0;
  top: 0;
  bottom: 0;
  width: 380px;
  max-width: 90vw;
  background: var(--bg-card);
  border-left: 2px solid var(--border);
  z-index: 50;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  animation: slide-in-right 0.2s ease-out;
}
@keyframes slide-in-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}
.agent-activity-panel__header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  background: var(--bg-card);
}
.agent-activity-panel__identity {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
}
.agent-activity-panel__emoji { font-size: 18px; }
.agent-activity-panel__name { font-size: 14px; font-weight: bold; color: var(--neon-cyan); }
.agent-activity-panel__stuck {
  background: rgba(255, 0, 64, 0.2);
  color: var(--neon-red);
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: bold;
  animation: pulse-glow 2s ease-in-out infinite;
}
.agent-activity-panel__close {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-dim);
  width: 24px;
  height: 24px;
  border-radius: 4px;
  cursor: pointer;
  font-family: var(--font);
  font-size: 12px;
}
.agent-activity-panel__close:hover { background: var(--bg-card-hover); color: var(--text-primary); }
.agent-activity-panel__meta {
  padding: 8px 16px;
  display: flex;
  gap: 12px;
  font-size: 11px;
  color: var(--text-dim);
}
.agent-activity-panel__loading { padding: 20px; text-align: center; color: var(--text-dim); }
.agent-activity-panel__session {
  margin: 0 16px;
  padding: 8px 12px;
  background: var(--bg-input);
  border-radius: 4px;
  border-left: 2px solid var(--neon-cyan);
}
.agent-activity-panel__session-title {
  font-size: 10px;
  color: var(--neon-cyan);
  margin-bottom: 4px;
  font-weight: bold;
}
.agent-activity-panel__session-row {
  display: flex;
  gap: 16px;
  font-size: 11px;
  color: var(--text-primary);
}
.agent-activity-panel__runs-title {
  padding: 12px 16px 4px;
  font-size: 10px;
  color: var(--text-dim);
  font-weight: bold;
  letter-spacing: 0.5px;
}
.agent-activity-panel__runs { padding: 0 16px 16px; }
.agent-activity-panel__empty {
  padding: 12px;
  text-align: center;
  color: var(--text-dim);
  font-size: 11px;
}
.agent-activity-panel__run {
  padding: 8px;
  border-left: 2px solid var(--border);
  margin-bottom: 6px;
  font-size: 11px;
}
.agent-activity-panel__run--done { border-left-color: var(--neon-green); }
.agent-activity-panel__run--running { border-left-color: var(--neon-cyan); }
.agent-activity-panel__run--failed { border-left-color: var(--neon-red); }
.agent-activity-panel__run-header {
  display: flex;
  align-items: center;
  gap: 8px;
}
.agent-activity-panel__run-status {
  font-size: 9px;
  font-weight: bold;
  padding: 1px 5px;
  border-radius: 2px;
}
.agent-activity-panel__run-status--done { background: rgba(0, 255, 65, 0.15); color: var(--neon-green); }
.agent-activity-panel__run-status--running { background: rgba(0, 255, 255, 0.15); color: var(--neon-cyan); }
.agent-activity-panel__run-status--failed { background: rgba(255, 0, 64, 0.15); color: var(--neon-red); }
.agent-activity-panel__run-wf { color: var(--neon-orange); }
.agent-activity-panel__run-step { color: var(--text-dim); }
.agent-activity-panel__run-task {
  color: var(--text-primary);
  margin-top: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.agent-activity-panel__run-time { color: var(--text-dim); font-size: 10px; margin-top: 2px; }

/* ── Terminal Widget ── */
/* ── Terminal Drawer (single pane) ── */
.term-drawer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 900;
  background: #0a0a12;
  border-top: 2px solid var(--neon-green);
  display: flex;
  flex-direction: column;
  height: 300px;
  box-shadow: 0 -4px 20px rgba(0, 255, 65, 0.15);
}
.term-drawer__header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 12px;
  background: rgba(0, 255, 65, 0.05);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.term-drawer__title {
  font-size: 11px;
  font-weight: bold;
  color: var(--neon-green);
  letter-spacing: 1px;
}
.term-drawer__hint {
  font-size: 10px;
  color: var(--text-dim);
}
.term-drawer__close {
  margin-left: auto;
  background: none;
  border: 1px solid var(--border);
  color: var(--text-dim);
  cursor: pointer;
  padding: 2px 8px;
  font-size: 12px;
  border-radius: 2px;
}
.term-drawer__close:hover {
  color: var(--neon-red);
  border-color: var(--neon-red);
}
.term-drawer__body {
  flex: 1;
  overflow-y: auto;
  padding: 8px 12px;
  font-size: 12px;
  line-height: 1.6;
}
.term-drawer__entry { margin-bottom: 10px; }
.term-drawer__prompt { font-size: 12px; color: var(--text-primary); }
.term-drawer__dollar { color: var(--neon-green); font-weight: bold; }
.term-drawer__result {
  margin: 2px 0 0;
  padding: 0;
  font-size: 11px;
  white-space: pre-wrap;
  word-break: break-word;
  color: var(--text-primary);
  background: none;
  border: none;
  font-family: var(--font);
}
.term-drawer__result--error { color: var(--neon-red); }
.term-drawer__running {
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--neon-cyan);
  font-size: 11px;
  padding: 4px 0;
}
.term-drawer__spinner {
  display: inline-block;
  width: 10px;
  height: 10px;
  border: 2px solid var(--neon-cyan);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
.term-drawer__input-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-top: 1px solid var(--border);
  background: var(--bg-input);
  flex-shrink: 0;
}
.term-drawer__input-dollar {
  color: var(--neon-green);
  font-weight: bold;
  font-size: 14px;
}
.term-drawer__input {
  flex: 1;
  background: none;
  border: none;
  color: var(--text-primary);
  font-family: var(--font);
  font-size: 12px;
  outline: none;
}
.term-drawer__input::placeholder { color: var(--text-dim); }
.term-drawer__run-btn {
  background: rgba(0, 255, 65, 0.15);
  border: 1px solid var(--neon-green);
  color: var(--neon-green);
  cursor: pointer;
  padding: 4px 12px;
  font-size: 12px;
  border-radius: 2px;
}
.term-drawer__run-btn:disabled { opacity: 0.3; cursor: not-allowed; }
.term-drawer__run-btn:not(:disabled):hover { background: rgba(0, 255, 65, 0.3); }

/* Shell open - shrink main content */
.layout__content--shell-open { margin-bottom: 300px; }

/* Tab nav shell button */
.tab-nav__item--shell {
  font-family: var(--font);
  font-size: inherit;
  cursor: pointer;
}

/* ── Inline Plan View (replaces modal) ── */
.af-inline-plan { padding: 8px 0; }
.af-inline-plan__loading {
  color: var(--text-dim);
  font-size: 11px;
  padding: 12px;
}
.af-inline-plan__tabs {
  display: flex;
  gap: 2px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 8px;
}
.af-inline-plan__tab {
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font);
  font-size: 11px;
  padding: 6px 14px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  letter-spacing: 0.5px;
}
.af-inline-plan__tab:hover { color: var(--text-primary); }
.af-inline-plan__tab--active {
  color: var(--neon-cyan);
  border-bottom-color: var(--neon-cyan);
}
.af-inline-plan__content {
  max-height: 400px;
  overflow-y: auto;
  padding: 4px 8px;
}
.af-inline-plan__heading {
  color: var(--neon-cyan);
  font-size: 13px;
  margin: 8px 0 4px;
}
.af-inline-plan__field {
  display: flex;
  gap: 8px;
  font-size: 11px;
  padding: 2px 0;
}
.af-inline-plan__key {
  color: var(--neon-green);
  font-weight: bold;
  white-space: nowrap;
}
.af-inline-plan__val { color: var(--text-primary); }
.af-inline-plan__text {
  font-size: 11px;
  color: var(--text-primary);
  margin: 2px 0;
}
.af-inline-plan__raw {
  font-size: 10px;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-break: break-word;
  background: none;
  border: none;
  font-family: var(--font);
  margin: 0;
}

/* ── Project Checklist ── */
.project-checklist {
  padding: 8px 0;
}
.project-checklist__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}
.project-checklist__title {
  font-size: 11px;
  color: var(--neon-cyan);
  font-weight: bold;
  letter-spacing: 0.5px;
}
.project-checklist__progress-text {
  font-size: 11px;
  color: var(--text-dim);
}
.project-checklist__bar {
  height: 4px;
  background: var(--bg-input);
  border-radius: 2px;
  margin-bottom: 8px;
  overflow: hidden;
}
.project-checklist__bar-fill {
  height: 100%;
  background: var(--neon-green);
  border-radius: 2px;
  transition: width 0.3s;
}
.project-checklist__items {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.project-checklist__item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 3px;
  cursor: pointer;
  transition: background 0.15s;
  font-size: 12px;
}
.project-checklist__item:hover { background: var(--bg-card-hover); }
.project-checklist__item--done { opacity: 0.6; }
.project-checklist__check {
  width: 16px;
  text-align: center;
  flex-shrink: 0;
}
.project-checklist__item--done .project-checklist__check { color: var(--neon-green); }
.project-checklist__item--done .project-checklist__label {
  text-decoration: line-through;
  color: var(--text-dim);
}
.project-checklist__link {
  color: var(--neon-cyan);
  text-decoration: none;
  font-size: 12px;
}
.project-checklist__link:hover { text-decoration: underline; }

/* ── Pipeline Updates ── */
.af-pipeline__expand {
  color: var(--text-dim);
  font-size: 10px;
  margin-left: auto;
}
.af-pipeline__actions {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 12px;
}
.af-pipeline__expanded {
  padding: 8px 12px;
  border-top: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.2);
}
.af-step__retry-btn {
  position: absolute;
  bottom: -2px;
  right: -2px;
  background: rgba(255, 0, 64, 0.8);
  color: #fff;
  border: none;
  padding: 1px 4px;
  font-size: 8px;
  font-family: var(--font);
  cursor: pointer;
  border-radius: 2px;
  font-weight: bold;
}
.af-step__retry-btn:hover { background: var(--neon-red); }
.af-step { position: relative; }

/* ── Agent Card Session Time ── */
.af-agent-card__bottom-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 4px;
}
.af-agent-card__session-time {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 2px;
  font-weight: bold;
}
.session-time--green { background: rgba(0, 255, 65, 0.15); color: var(--neon-green); }
.session-time--orange { background: rgba(255, 102, 0, 0.15); color: var(--neon-orange); }
.session-time--red { background: rgba(255, 0, 64, 0.15); color: var(--neon-red); }

/* Long idle / never used agents */
.af-agent-card--long-idle {
  border-color: rgba(255, 102, 0, 0.3) !important;
}
.af-agent-card--never {
  opacity: 0.5;
}

/* ── Idle Agent Stats Section ── */
.af-stats__idle {
  margin-top: 12px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}
.af-stats__idle-title {
  font-size: 10px;
  color: var(--text-dim);
  font-weight: bold;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
}
.af-stats__idle-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.af-stats__idle-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: var(--bg-input);
  border-radius: 3px;
  font-size: 11px;
  opacity: 0.6;
}
.af-stats__idle-emoji { font-size: 13px; }
.af-stats__idle-name { color: var(--text-primary); }
.af-stats__idle-role { color: var(--text-dim); margin-left: auto; font-size: 10px; }

/* ── Projects Page Updates ── */
.projects-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}
.projects-page__actions {
  display: flex;
  gap: 8px;
}
.project-card__actions {
  display: flex;
  gap: 4px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}
.btn--tiny {
  padding: 2px 8px;
  font-size: 9px;
}
.project-card__checklist-mini {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
}
.project-card__checklist-bar {
  flex: 1;
  height: 3px;
  background: var(--bg-input);
  border-radius: 2px;
  overflow: hidden;
}
.project-card__checklist-fill {
  height: 100%;
  background: var(--neon-green);
  border-radius: 2px;
  transition: width 0.3s;
}
.project-card__checklist-text {
  font-size: 10px;
  color: var(--text-dim);
  white-space: nowrap;
}

/* ── Button Variants ── */
.btn--secondary {
  background: rgba(0, 255, 255, 0.1);
  border: 1px solid rgba(0, 255, 255, 0.3);
  color: var(--neon-cyan);
}
.btn--secondary:hover {
  background: rgba(0, 255, 255, 0.2);
}

/* ── Files Page ── */
.files-page {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 120px);
  gap: 0;
}
.files-page__top {  margin-bottom: 8px;  display: flex;  align-items: center;  gap: 12px;}.files-refresh-btn {  background: transparent;  border: 1px solid var(--neon-cyan, #0ff);  color: var(--neon-cyan, #0ff);  padding: 4px 12px;  font-size: 10px;  font-weight: 700;  letter-spacing: 1px;  cursor: pointer;  font-family: inherit;  transition: background 0.2s;}.files-refresh-btn:hover {  background: rgba(0, 255, 255, 0.1);}
.files-breadcrumb {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 6px 12px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  margin-bottom: 8px;
  overflow-x: auto;
  flex-shrink: 0;
}
.files-breadcrumb__seg {
  background: none;
  border: none;
  color: var(--neon-cyan);
  font-family: var(--font);
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
  white-space: nowrap;
}
.files-breadcrumb__seg:hover {
  color: var(--neon-green);
}
.files-breadcrumb__seg--active {
  color: var(--text-primary);
}
.files-page__panels {
  display: flex;
  gap: 8px;
  flex: 1;
  min-height: 0;
}
.files-page__tree {
  width: 320px;
  flex-shrink: 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow-y: auto;
}
.files-page__viewer {
  flex: 1;
  min-width: 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* File Tree */
.file-tree__list {
  display: flex;
  flex-direction: column;
}
.file-tree__entry {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: none;
  border: none;
  font-family: var(--font);
  font-size: 12px;
  color: var(--text-primary);
  cursor: pointer;
  text-align: left;
  width: 100%;
  border-bottom: 1px solid rgba(30, 30, 58, 0.5);
}
.file-tree__entry:hover {
  background: rgba(0, 255, 255, 0.05);
}
.file-tree__entry--active {
  background: rgba(0, 255, 255, 0.1);
  border-left: 2px solid var(--neon-cyan);
}
.file-tree__entry--dir .file-tree__name {
  color: var(--neon-cyan);
}
.file-tree__entry--up {
  color: var(--neon-orange);
  border-bottom: 1px solid var(--border);
  margin-bottom: 2px;
}
.file-tree__icon {
  color: var(--text-dim);
  width: 10px;
  text-align: center;
  flex-shrink: 0;
}
.file-tree__name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.file-tree__meta {
  display: flex;
  gap: 8px;
  color: var(--text-dim);
  font-size: 10px;
  flex-shrink: 0;
}
.file-tree__empty {
  padding: 20px;
  text-align: center;
  color: var(--text-dim);
  font-size: 12px;
}
.file-tree__empty--error {
  color: var(--neon-orange);
}

/* File Viewer */
.file-viewer {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.file-viewer__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.file-viewer__filename {
  color: var(--neon-green);
  font-weight: bold;
  font-size: 13px;
}
.file-viewer__info {
  color: var(--text-dim);
  font-size: 11px;
}
.file-viewer__content {
  display: flex;
  flex: 1;
  overflow: auto;
  font-size: 12px;
  line-height: 1.5;
}
.file-viewer__lines {
  display: flex;
  flex-direction: column;
  padding: 8px 8px 8px 12px;
  background: rgba(10, 10, 15, 0.5);
  color: var(--text-dim);
  text-align: right;
  user-select: none;
  flex-shrink: 0;
  border-right: 1px solid var(--border);
}
.file-viewer__line-num {
  font-family: var(--font);
  font-size: 12px;
  line-height: 1.5;
  white-space: pre;
}
.file-viewer__code {
  flex: 1;
  margin: 0;
  padding: 8px 12px;
  font-family: var(--font);
  font-size: 12px;
  line-height: 1.5;
  color: var(--text-primary);
  white-space: pre;
  overflow-x: auto;
}
.file-viewer__code-line {
  display: inline;
}
.file-viewer__empty {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-dim);
  font-size: 14px;
}
.file-viewer__empty--error {
  color: var(--neon-orange);
}

/* Files responsive */
@media (max-width: 768px) {
  .files-page__panels {
    flex-direction: column;
  }
  .files-page__tree {
    width: 100%;
    max-height: 40vh;
  }
}
